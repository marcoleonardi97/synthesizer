<!doctype html>
<html class="no-js" lang="en" data-content_root="">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />
<link rel="index" title="Index" href="../genindex.html" /><link rel="search" title="Search" href="../search.html" /><link rel="next" title="Creating Images From Parametric Galaxies" href="parametric_imaging.html" /><link rel="prev" title="Imaging" href="imaging.html" />

    <!-- Generated with Sphinx 7.1.1 and Furo 2023.09.10 -->
        <title>Creating Images From Galaxy Particle distributions - synthesizer 0.1 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=a746c00c" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo.css?v=135e06be" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery.css?v=61a4c737" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery-binder.css?v=f4aeca0c" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery-dataframe.css?v=2082cf3c" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery-rendered-html.css?v=1277b6f3" />
    <link rel="stylesheet" type="text/css" href="../_static/nbsphinx-code-cells.css" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo-extensions.css?v=36a5483c" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../index.html"><div class="brand">synthesizer 0.1 documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../index.html">
  
  <div class="sidebar-logo-container">
    <img class="sidebar-logo" src="../_static/synth.png" alt="Logo"/>
  </div>
  
  
</a><form class="sidebar-search-container" method="get" action="../search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../grids/grids.html">Grids</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle navigation of Grids</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../grids/grids_example.html">Grids</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../abundances.html">Abundances</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../galaxies/galaxies.html">Galaxy Objects</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle navigation of Galaxy Objects</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../galaxies/galaxy_obj.html">Working with Galaxy objects</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../spectra.html">Spectra</a></li>
<li class="toctree-l1"><a class="reference internal" href="../units.html">Units</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sed.html">The Sed object</a></li>
<li class="toctree-l1"><a class="reference internal" href="../lines.html">Emission lines</a></li>
<li class="toctree-l1"><a class="reference internal" href="../filters.html">Working with Filters</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../blackholes/blackholes.html">Black holes</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><div class="visually-hidden">Toggle navigation of Black holes</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../blackholes/emission_models.html">Blackhole emission models</a></li>
<li class="toctree-l2"><a class="reference internal" href="../blackholes/particle_blackholes.html">Blackholes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../blackholes/parametric_blackholes.html">Parametric Blackholes</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../parametric/parametric.html">Parametric models</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><div class="visually-hidden">Toggle navigation of Parametric models</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../parametric/make_stars.html">Making a Parametric Stellar Population</a></li>
<li class="toctree-l2"><a class="reference internal" href="../parametric/generate_sed.html">Generating Rest Frame SEDs from a Parametric Galaxy</a></li>
<li class="toctree-l2"><a class="reference internal" href="../parametric/generate_lines.html">Generating Lines from a Parametric Galaxy</a></li>
<li class="toctree-l2"><a class="reference internal" href="../parametric/generate_composite_galaxy.html">Generate composite galaxy</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../cosmo/cosmo.html">Cosmological models</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" role="switch" type="checkbox"/><label for="toctree-checkbox-5"><div class="visually-hidden">Toggle navigation of Cosmological models</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../cosmo/cosmo_example.html">Camels example</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cosmo/survey_example.html">CAMELS survey example</a></li>
</ul>
</li>
<li class="toctree-l1 current has-children"><a class="reference internal" href="imaging.html">Imaging</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" role="switch" type="checkbox"/><label for="toctree-checkbox-6"><div class="visually-hidden">Toggle navigation of Imaging</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l2 current current-page"><a class="current reference internal" href="#">Creating Images From Galaxy Particle distributions</a></li>
<li class="toctree-l2"><a class="reference internal" href="parametric_imaging.html">Creating Images From Parametric Galaxies</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../auto_examples/index.html">Examples</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" role="switch" type="checkbox"/><label for="toctree-checkbox-7"><div class="visually-hidden">Toggle navigation of Examples</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../auto_examples/cosmo/index.html">Cosmological simulation examples</a><input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" role="switch" type="checkbox"/><label for="toctree-checkbox-8"><div class="visually-hidden">Toggle navigation of Cosmological simulation examples</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../auto_examples/cosmo/test_los_spectra.html">Line of sight example</a></li>
<li class="toctree-l3"><a class="reference internal" href="../auto_examples/cosmo/plot_sc-sam.html">SC-SAM example</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../auto_examples/general/index.html">General examples</a><input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" role="switch" type="checkbox"/><label for="toctree-checkbox-9"><div class="visually-hidden">Toggle navigation of General examples</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../auto_examples/general/plot_igm.html">IGM transmission example</a></li>
<li class="toctree-l3"><a class="reference internal" href="../auto_examples/general/plot_dustcurves.html">Dust curves example</a></li>
<li class="toctree-l3"><a class="reference internal" href="../auto_examples/general/plot_filters.html">Filters example</a></li>
<li class="toctree-l3"><a class="reference internal" href="../auto_examples/general/plot_quiescent_colours.html">Plot quiescent UVJ diagram</a></li>
<li class="toctree-l3"><a class="reference internal" href="../auto_examples/general/plot_photometry.html">Photometry example</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../auto_examples/grids/index.html">Grid examples</a><input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" role="switch" type="checkbox"/><label for="toctree-checkbox-10"><div class="visually-hidden">Toggle navigation of Grid examples</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../auto_examples/grids/plot_log10Q.html">Plot ionising luminosity</a></li>
<li class="toctree-l3"><a class="reference internal" href="../auto_examples/grids/plot_spectra.html">Plot spectra example</a></li>
<li class="toctree-l3"><a class="reference internal" href="../auto_examples/grids/plot_lines.html">Get lines example</a></li>
<li class="toctree-l3"><a class="reference internal" href="../auto_examples/grids/plot_spectra_by_age.html">Plot spectra by age</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../auto_examples/imaging/index.html">Imaging examples</a><input class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" role="switch" type="checkbox"/><label for="toctree-checkbox-11"><div class="visually-hidden">Toggle navigation of Imaging examples</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../auto_examples/imaging/image_addition.html">Image addition example</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../auto_examples/parametric/index.html">Parametric galaxy examples</a><input class="toctree-checkbox" id="toctree-checkbox-12" name="toctree-checkbox-12" role="switch" type="checkbox"/><label for="toctree-checkbox-12"><div class="visually-hidden">Toggle navigation of Parametric galaxy examples</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../auto_examples/parametric/plot_delta_lambda.html">Plot delta_lambda for a grid.</a></li>
<li class="toctree-l3"><a class="reference internal" href="../auto_examples/parametric/generate_lines.html">Generate lines from parametric galaxy</a></li>
<li class="toctree-l3"><a class="reference internal" href="../auto_examples/parametric/plot_create_image.html">Create image example</a></li>
<li class="toctree-l3"><a class="reference internal" href="../auto_examples/parametric/plot_observed_sed.html">Generate parametric observed SED</a></li>
<li class="toctree-l3"><a class="reference internal" href="../auto_examples/parametric/plot_sed.html">Generate parametric galaxy SED</a></li>
<li class="toctree-l3"><a class="reference internal" href="../auto_examples/parametric/plot_scale_by_luminosity.html">An example showing how to scale a galaxy’s mass by luminosity/flux.</a></li>
<li class="toctree-l3"><a class="reference internal" href="../auto_examples/parametric/plot_equivalent_width.html">Plot equivalent width for UV indices</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../auto_examples/particle/index.html">Particle galaxy examples</a><input class="toctree-checkbox" id="toctree-checkbox-13" name="toctree-checkbox-13" role="switch" type="checkbox"/><label for="toctree-checkbox-13"><div class="visually-hidden">Toggle navigation of Particle galaxy examples</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../auto_examples/particle/plot_create_sampled_sed.html">Create sampled SED</a></li>
<li class="toctree-l3"><a class="reference internal" href="../auto_examples/particle/plot_compare_parametric_particle.html">Compare parametric and particle SEDs</a></li>
<li class="toctree-l3"><a class="reference internal" href="../auto_examples/particle/plot_compare_grid_assignment.html">Compare SPS grid assignment methods</a></li>
<li class="toctree-l3"><a class="reference internal" href="../auto_examples/particle/plot_single_star_test.html">Compare Single star particle to instantaneous SFZH</a></li>
<li class="toctree-l3"><a class="reference internal" href="../auto_examples/particle/plot_los_spectra.html">Plot line of sight diagnostics</a></li>
<li class="toctree-l3"><a class="reference internal" href="../auto_examples/particle/plot_get_los_attenutation.html">Plot line of sight diagnostics</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../API.html">API Reference</a><input class="toctree-checkbox" id="toctree-checkbox-14" name="toctree-checkbox-14" role="switch" type="checkbox"/><label for="toctree-checkbox-14"><div class="visually-hidden">Toggle navigation of API Reference</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../_autosummary/synthesizer.html">synthesizer</a><input class="toctree-checkbox" id="toctree-checkbox-15" name="toctree-checkbox-15" role="switch" type="checkbox"/><label for="toctree-checkbox-15"><div class="visually-hidden">Toggle navigation of synthesizer</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3 has-children"><a class="reference internal" href="../_autosummary/synthesizer.abundances.html">synthesizer.abundances</a><input class="toctree-checkbox" id="toctree-checkbox-16" name="toctree-checkbox-16" role="switch" type="checkbox"/><label for="toctree-checkbox-16"><div class="visually-hidden">Toggle navigation of synthesizer.abundances</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../_autosummary/synthesizer.abundances.abundance_patterns.html">synthesizer.abundances.abundance_patterns</a></li>
<li class="toctree-l4"><a class="reference internal" href="../_autosummary/synthesizer.abundances.abundance_scalings.html">synthesizer.abundances.abundance_scalings</a></li>
<li class="toctree-l4"><a class="reference internal" href="../_autosummary/synthesizer.abundances.depletion_models.html">synthesizer.abundances.depletion_models</a></li>
<li class="toctree-l4"><a class="reference internal" href="../_autosummary/synthesizer.abundances.solar_abundance_patterns.html">synthesizer.abundances.solar_abundance_patterns</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../_autosummary/synthesizer.art.html">synthesizer.art</a></li>
<li class="toctree-l3"><a class="reference internal" href="../_autosummary/synthesizer.base_galaxy.html">synthesizer.base_galaxy</a></li>
<li class="toctree-l3"><a class="reference internal" href="../_autosummary/synthesizer.blackhole_emission_models.html">synthesizer.blackhole_emission_models</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../_autosummary/synthesizer.components.html">synthesizer.components</a><input class="toctree-checkbox" id="toctree-checkbox-17" name="toctree-checkbox-17" role="switch" type="checkbox"/><label for="toctree-checkbox-17"><div class="visually-hidden">Toggle navigation of synthesizer.components</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../_autosummary/synthesizer.components.blackhole.html">synthesizer.components.blackhole</a></li>
<li class="toctree-l4"><a class="reference internal" href="../_autosummary/synthesizer.components.stellar.html">synthesizer.components.stellar</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../_autosummary/synthesizer.conversions.html">synthesizer.conversions</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../_autosummary/synthesizer.dust.html">synthesizer.dust</a><input class="toctree-checkbox" id="toctree-checkbox-18" name="toctree-checkbox-18" role="switch" type="checkbox"/><label for="toctree-checkbox-18"><div class="visually-hidden">Toggle navigation of synthesizer.dust</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../_autosummary/synthesizer.dust.attenuation.html">synthesizer.dust.attenuation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../_autosummary/synthesizer.dust.emission.html">synthesizer.dust.emission</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../_autosummary/synthesizer.exceptions.html">synthesizer.exceptions</a><input class="toctree-checkbox" id="toctree-checkbox-19" name="toctree-checkbox-19" role="switch" type="checkbox"/><label for="toctree-checkbox-19"><div class="visually-hidden">Toggle navigation of synthesizer.exceptions</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../_autosummary/synthesizer.exceptions.GridError.html">synthesizer.exceptions.GridError</a></li>
<li class="toctree-l4"><a class="reference internal" href="../_autosummary/synthesizer.exceptions.InconsistentAddition.html">synthesizer.exceptions.InconsistentAddition</a></li>
<li class="toctree-l4"><a class="reference internal" href="../_autosummary/synthesizer.exceptions.InconsistentArguments.html">synthesizer.exceptions.InconsistentArguments</a></li>
<li class="toctree-l4"><a class="reference internal" href="../_autosummary/synthesizer.exceptions.InconsistentCoordinates.html">synthesizer.exceptions.InconsistentCoordinates</a></li>
<li class="toctree-l4"><a class="reference internal" href="../_autosummary/synthesizer.exceptions.InconsistentParameter.html">synthesizer.exceptions.InconsistentParameter</a></li>
<li class="toctree-l4"><a class="reference internal" href="../_autosummary/synthesizer.exceptions.InconsistentWavelengths.html">synthesizer.exceptions.InconsistentWavelengths</a></li>
<li class="toctree-l4"><a class="reference internal" href="../_autosummary/synthesizer.exceptions.IncorrectUnits.html">synthesizer.exceptions.IncorrectUnits</a></li>
<li class="toctree-l4"><a class="reference internal" href="../_autosummary/synthesizer.exceptions.MissingArgument.html">synthesizer.exceptions.MissingArgument</a></li>
<li class="toctree-l4"><a class="reference internal" href="../_autosummary/synthesizer.exceptions.MissingAttribute.html">synthesizer.exceptions.MissingAttribute</a></li>
<li class="toctree-l4"><a class="reference internal" href="../_autosummary/synthesizer.exceptions.MissingImage.html">synthesizer.exceptions.MissingImage</a></li>
<li class="toctree-l4"><a class="reference internal" href="../_autosummary/synthesizer.exceptions.MissingSpectraType.html">synthesizer.exceptions.MissingSpectraType</a></li>
<li class="toctree-l4"><a class="reference internal" href="../_autosummary/synthesizer.exceptions.MissingUnits.html">synthesizer.exceptions.MissingUnits</a></li>
<li class="toctree-l4"><a class="reference internal" href="../_autosummary/synthesizer.exceptions.SVOFilterNotFound.html">synthesizer.exceptions.SVOFilterNotFound</a></li>
<li class="toctree-l4"><a class="reference internal" href="../_autosummary/synthesizer.exceptions.SVOInaccessible.html">synthesizer.exceptions.SVOInaccessible</a></li>
<li class="toctree-l4"><a class="reference internal" href="../_autosummary/synthesizer.exceptions.UnimplementedFunctionality.html">synthesizer.exceptions.UnimplementedFunctionality</a></li>
<li class="toctree-l4"><a class="reference internal" href="../_autosummary/synthesizer.exceptions.UnknownImageType.html">synthesizer.exceptions.UnknownImageType</a></li>
<li class="toctree-l4"><a class="reference internal" href="../_autosummary/synthesizer.exceptions.UnrecognisedOption.html">synthesizer.exceptions.UnrecognisedOption</a></li>
<li class="toctree-l4"><a class="reference internal" href="../_autosummary/synthesizer.exceptions.WavelengthOutOfRange.html">synthesizer.exceptions.WavelengthOutOfRange</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../_autosummary/synthesizer.filters.html">synthesizer.filters</a></li>
<li class="toctree-l3"><a class="reference internal" href="../_autosummary/synthesizer.galaxy.html">synthesizer.galaxy</a></li>
<li class="toctree-l3"><a class="reference internal" href="../_autosummary/synthesizer.grid.html">synthesizer.grid</a></li>
<li class="toctree-l3"><a class="reference internal" href="../_autosummary/synthesizer.igm.html">synthesizer.igm</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../_autosummary/synthesizer.imaging.html">synthesizer.imaging</a><input class="toctree-checkbox" id="toctree-checkbox-20" name="toctree-checkbox-20" role="switch" type="checkbox"/><label for="toctree-checkbox-20"><div class="visually-hidden">Toggle navigation of synthesizer.imaging</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4 has-children"><a class="reference internal" href="../_autosummary/synthesizer.imaging.extensions.html">synthesizer.imaging.extensions</a><input class="toctree-checkbox" id="toctree-checkbox-21" name="toctree-checkbox-21" role="switch" type="checkbox"/><label for="toctree-checkbox-21"><div class="visually-hidden">Toggle navigation of synthesizer.imaging.extensions</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l5"><a class="reference internal" href="../_autosummary/synthesizer.imaging.extensions.image.html">synthesizer.imaging.extensions.image</a></li>
<li class="toctree-l5"><a class="reference internal" href="../_autosummary/synthesizer.imaging.extensions.spectral_cube.html">synthesizer.imaging.extensions.spectral_cube</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../_autosummary/synthesizer.imaging.images.html">synthesizer.imaging.images</a></li>
<li class="toctree-l4"><a class="reference internal" href="../_autosummary/synthesizer.imaging.scene.html">synthesizer.imaging.scene</a></li>
<li class="toctree-l4"><a class="reference internal" href="../_autosummary/synthesizer.imaging.spectral_cubes.html">synthesizer.imaging.spectral_cubes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../_autosummary/synthesizer.kernel_functions.html">synthesizer.kernel_functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../_autosummary/synthesizer.line.html">synthesizer.line</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../_autosummary/synthesizer.load_data.html">synthesizer.load_data</a><input class="toctree-checkbox" id="toctree-checkbox-22" name="toctree-checkbox-22" role="switch" type="checkbox"/><label for="toctree-checkbox-22"><div class="visually-hidden">Toggle navigation of synthesizer.load_data</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../_autosummary/synthesizer.load_data.load_camels.html">synthesizer.load_data.load_camels</a></li>
<li class="toctree-l4"><a class="reference internal" href="../_autosummary/synthesizer.load_data.load_flares.html">synthesizer.load_data.load_flares</a></li>
<li class="toctree-l4"><a class="reference internal" href="../_autosummary/synthesizer.load_data.load_scsam.html">synthesizer.load_data.load_scsam</a></li>
<li class="toctree-l4"><a class="reference internal" href="../_autosummary/synthesizer.load_data.load_simba.html">synthesizer.load_data.load_simba</a></li>
<li class="toctree-l4"><a class="reference internal" href="../_autosummary/synthesizer.load_data.utils.html">synthesizer.load_data.utils</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../_autosummary/synthesizer.parametric.html">synthesizer.parametric</a><input class="toctree-checkbox" id="toctree-checkbox-23" name="toctree-checkbox-23" role="switch" type="checkbox"/><label for="toctree-checkbox-23"><div class="visually-hidden">Toggle navigation of synthesizer.parametric</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../_autosummary/synthesizer.parametric.blackholes.html">synthesizer.parametric.blackholes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../_autosummary/synthesizer.parametric.galaxy.html">synthesizer.parametric.galaxy</a></li>
<li class="toctree-l4"><a class="reference internal" href="../_autosummary/synthesizer.parametric.metal_dist.html">synthesizer.parametric.metal_dist</a></li>
<li class="toctree-l4"><a class="reference internal" href="../_autosummary/synthesizer.parametric.morphology.html">synthesizer.parametric.morphology</a></li>
<li class="toctree-l4"><a class="reference internal" href="../_autosummary/synthesizer.parametric.sf_hist.html">synthesizer.parametric.sf_hist</a></li>
<li class="toctree-l4"><a class="reference internal" href="../_autosummary/synthesizer.parametric.stars.html">synthesizer.parametric.stars</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../_autosummary/synthesizer.particle.html">synthesizer.particle</a><input class="toctree-checkbox" id="toctree-checkbox-24" name="toctree-checkbox-24" role="switch" type="checkbox"/><label for="toctree-checkbox-24"><div class="visually-hidden">Toggle navigation of synthesizer.particle</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../_autosummary/synthesizer.particle.blackholes.html">synthesizer.particle.blackholes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../_autosummary/synthesizer.particle.galaxy.html">synthesizer.particle.galaxy</a></li>
<li class="toctree-l4"><a class="reference internal" href="../_autosummary/synthesizer.particle.gas.html">synthesizer.particle.gas</a></li>
<li class="toctree-l4"><a class="reference internal" href="../_autosummary/synthesizer.particle.particles.html">synthesizer.particle.particles</a></li>
<li class="toctree-l4"><a class="reference internal" href="../_autosummary/synthesizer.particle.stars.html">synthesizer.particle.stars</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../_autosummary/synthesizer.photoionisation.html">synthesizer.photoionisation</a><input class="toctree-checkbox" id="toctree-checkbox-25" name="toctree-checkbox-25" role="switch" type="checkbox"/><label for="toctree-checkbox-25"><div class="visually-hidden">Toggle navigation of synthesizer.photoionisation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../_autosummary/synthesizer.photoionisation.cloudy17.html">synthesizer.photoionisation.cloudy17</a></li>
<li class="toctree-l4"><a class="reference internal" href="../_autosummary/synthesizer.photoionisation.photoionisation.html">synthesizer.photoionisation.photoionisation</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../_autosummary/synthesizer.photometry.html">synthesizer.photometry</a></li>
<li class="toctree-l3"><a class="reference internal" href="../_autosummary/synthesizer.plt.html">synthesizer.plt</a></li>
<li class="toctree-l3"><a class="reference internal" href="../_autosummary/synthesizer.sed.html">synthesizer.sed</a></li>
<li class="toctree-l3"><a class="reference internal" href="../_autosummary/synthesizer.stats.html">synthesizer.stats</a></li>
<li class="toctree-l3"><a class="reference internal" href="../_autosummary/synthesizer.survey.html">synthesizer.survey</a></li>
<li class="toctree-l3"><a class="reference internal" href="../_autosummary/synthesizer.units.html">synthesizer.units</a></li>
<li class="toctree-l3"><a class="reference internal" href="../_autosummary/synthesizer.utils.html">synthesizer.utils</a></li>
</ul>
</li>
</ul>
</li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          
<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main">
          <section id="Creating-Images-From-Galaxy-Particle-distributions">
<h1>Creating Images From Galaxy Particle distributions<a class="headerlink" href="#Creating-Images-From-Galaxy-Particle-distributions" title="Permalink to this heading">#</a></h1>
<p>In this example we show how to create various different types of images from stellar particles. For this purpose we utilise the parametric SFZH functionality to create fake galaxies, derive their spectra from the SPS grid and then make images using the Sythensizer Imaging submodule.</p>
<section id="The-setup">
<h2>The setup<a class="headerlink" href="#The-setup" title="Permalink to this heading">#</a></h2>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">matplotlib</span> <span class="k">as</span> <span class="nn">mpl</span>
<span class="kn">import</span> <span class="nn">matplotlib.colors</span> <span class="k">as</span> <span class="nn">cm</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">matplotlib.gridspec</span> <span class="k">as</span> <span class="nn">gridspec</span>
<span class="kn">from</span> <span class="nn">unyt</span> <span class="kn">import</span> <span class="n">yr</span><span class="p">,</span> <span class="n">Myr</span><span class="p">,</span> <span class="n">kpc</span><span class="p">,</span> <span class="n">arcsec</span><span class="p">,</span> <span class="n">nJy</span><span class="p">,</span> <span class="n">Mpc</span><span class="p">,</span> <span class="n">Msun</span>
<span class="kn">from</span> <span class="nn">astropy.cosmology</span> <span class="kn">import</span> <span class="n">Planck18</span> <span class="k">as</span> <span class="n">cosmo</span>
<span class="kn">from</span> <span class="nn">scipy</span> <span class="kn">import</span> <span class="n">signal</span>

<span class="kn">from</span> <span class="nn">synthesizer.grid</span> <span class="kn">import</span> <span class="n">Grid</span>
<span class="kn">from</span> <span class="nn">synthesizer.filters</span> <span class="kn">import</span> <span class="n">FilterCollection</span> <span class="k">as</span> <span class="n">Filters</span>
<span class="kn">from</span> <span class="nn">synthesizer.load_data.load_camels</span> <span class="kn">import</span> <span class="n">load_CAMELS_IllustrisTNG</span>
<span class="kn">from</span> <span class="nn">synthesizer.kernel_functions</span> <span class="kn">import</span> <span class="n">Kernel</span>
</pre></div>
</div>
</div>
<p>First port of call is initilaising the SPS grid. Here we use the test grid.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Define the grid</span>
<span class="n">grid_name</span> <span class="o">=</span> <span class="s2">&quot;test_grid&quot;</span>
<span class="n">grid_dir</span> <span class="o">=</span> <span class="s2">&quot;../../../tests/test_grid/&quot;</span>
<span class="n">grid</span> <span class="o">=</span> <span class="n">Grid</span><span class="p">(</span><span class="n">grid_name</span><span class="p">,</span> <span class="n">grid_dir</span><span class="o">=</span><span class="n">grid_dir</span><span class="p">,</span> <span class="n">new_lam</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">logspace</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">600</span><span class="p">))</span>
</pre></div>
</div>
</div>
<p>For demonstration purposes we will just load one of the CAMELS galaxies from the test data. To see how to intialise your own galaxies see <a class="reference internal" href="../galaxies/galaxy_obj.html"><span class="doc">the particle galaxy docs</span></a>.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">galaxy_start</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>

<span class="c1"># Create galaxy object</span>
<span class="n">gal</span> <span class="o">=</span> <span class="n">load_CAMELS_IllustrisTNG</span><span class="p">(</span>
    <span class="s2">&quot;../../../tests/data/&quot;</span><span class="p">,</span>
    <span class="n">snap_name</span><span class="o">=</span><span class="s2">&quot;camels_snap.hdf5&quot;</span><span class="p">,</span>
    <span class="n">fof_name</span><span class="o">=</span><span class="s2">&quot;camels_subhalo.hdf5&quot;</span><span class="p">,</span>
    <span class="n">physical</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="p">)[</span><span class="mi">1</span><span class="p">]</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Galaxy created, took:&quot;</span><span class="p">,</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">galaxy_start</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Galaxy has </span><span class="si">{</span><span class="n">gal</span><span class="o">.</span><span class="n">stars</span><span class="o">.</span><span class="n">nstars</span><span class="si">}</span><span class="s2"> stellar particles&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Galaxy gas </span><span class="si">{</span><span class="n">gal</span><span class="o">.</span><span class="n">gas</span><span class="o">.</span><span class="n">nparticles</span><span class="si">}</span><span class="s2"> gas particles&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Galaxy created, took: 0.024966716766357422
Galaxy has 120 stellar particles
Galaxy gas 1218 gas particles
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
/opt/hostedtoolcache/Python/3.10.13/x64/lib/python3.10/site-packages/unyt/array.py:1938: RuntimeWarning: invalid value encountered in divide
  out_arr = func(
</pre></div></div>
</div>
<section id="Getting-the-spectra">
<h3>Getting the spectra<a class="headerlink" href="#Getting-the-spectra" title="Permalink to this heading">#</a></h3>
<p>To make an image we need to map the stellar particle properties onto the SPS grid defined in the <code class="docutils literal notranslate"><span class="pre">grid</span></code> object. To do this we use the galaxy’s in built <code class="docutils literal notranslate"><span class="pre">generate_particle_spectra</span></code> method and create <code class="docutils literal notranslate"><span class="pre">&quot;total&quot;</span></code> SEDs with both stellar and nebular contributions. This returns an SED object containing lots of helper methods for working with spectra.</p>
<p>Here we will use <code class="docutils literal notranslate"><span class="pre">get_fnu</span></code> to convert the rest frame SED into an observed SED which takes into account the previously set redshift stored on the <code class="docutils literal notranslate"><span class="pre">stars</span></code> object. By passing <code class="docutils literal notranslate"><span class="pre">igm=None</span></code> we assume the default <code class="docutils literal notranslate"><span class="pre">igm</span></code> contribution (<code class="docutils literal notranslate"><span class="pre">Inoue14</span></code>). This can be changed to <code class="docutils literal notranslate"><span class="pre">False</span></code> for no IGM or to another IGM model defined in <code class="docutils literal notranslate"><span class="pre">synthesizer.igm</span></code>.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">spectra_start</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>

<span class="c1"># Calculate the stellar rest frame SEDs for all particles in erg / s / Hz</span>
<span class="n">sed</span> <span class="o">=</span> <span class="n">gal</span><span class="o">.</span><span class="n">stars</span><span class="o">.</span><span class="n">get_particle_spectra_incident</span><span class="p">(</span><span class="n">grid</span><span class="p">)</span>

<span class="c1"># Calculate the observed SED in nJy</span>
<span class="n">sed</span><span class="o">.</span><span class="n">get_fnu</span><span class="p">(</span><span class="n">cosmo</span><span class="p">,</span> <span class="n">gal</span><span class="o">.</span><span class="n">redshift</span><span class="p">,</span> <span class="n">igm</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Spectra created, took:&quot;</span><span class="p">,</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">spectra_start</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Spectra created, took: 0.008907318115234375
</pre></div></div>
</div>
</section>
<section id="Defining-filters">
<h3>Defining filters<a class="headerlink" href="#Defining-filters" title="Permalink to this heading">#</a></h3>
<p>Before making photometric images we need to define a set of filters we want images for. This can be done in a number of ways using a <code class="docutils literal notranslate"><span class="pre">FilterCollection</span></code> object. There are a number of different ways to create filters (see the filter example). Here we will get Webb filters from the SVO database.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">filter_start</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>

<span class="c1"># Define filter list</span>
<span class="n">filter_codes</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s2">&quot;JWST/NIRCam.F090W&quot;</span><span class="p">,</span>
    <span class="s2">&quot;JWST/NIRCam.F150W&quot;</span><span class="p">,</span>
    <span class="s2">&quot;JWST/NIRCam.F200W&quot;</span><span class="p">,</span>
<span class="p">]</span>

<span class="c1"># Set up filter object</span>
<span class="n">filters</span> <span class="o">=</span> <span class="n">Filters</span><span class="p">(</span><span class="n">filter_codes</span><span class="p">,</span> <span class="n">new_lam</span><span class="o">=</span><span class="n">grid</span><span class="o">.</span><span class="n">lam</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Filters created, took:&quot;</span><span class="p">,</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">filter_start</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Filters created, took: 0.8613300323486328
</pre></div></div>
</div>
</section>
</section>
<section id="Imaging">
<h2>Imaging<a class="headerlink" href="#Imaging" title="Permalink to this heading">#</a></h2>
<p>Before we make any images we need to define the resolution of our images and the FOV (or width) of the images. We do this with associated units to enable the code to internally transform all quantites to a consistent unit system. We take the units of the resolution as the unit system to which all quantities should be transformed. Here we will use kpc for all spatial quantities but this is not necessary, these units can be a mixture units with the same dimension (e.g. <em>physical</em> Mpc, kpc and pc,
or arcseconds and degrees) or a mixture of angular and cartesian units (but note that angular coordinates require a redshift to be defined even when making rest frame images to enable the transformation to a consistent unit system).</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Define the width of the image</span>
<span class="n">width</span> <span class="o">=</span> <span class="mi">30</span> <span class="o">*</span> <span class="n">kpc</span>

<span class="c1"># Define image resolution (here we arbitrarily set it to 100 pixels along an axis)</span>
<span class="n">resolution</span> <span class="o">=</span> <span class="n">width</span> <span class="o">/</span> <span class="mi">200</span>

<span class="nb">print</span><span class="p">(</span>
    <span class="s2">&quot;Image width is </span><span class="si">%.2f</span><span class="s2"> kpc with </span><span class="si">%.2f</span><span class="s2"> kpc resolution&quot;</span>
    <span class="o">%</span> <span class="p">(</span><span class="n">width</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="n">resolution</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Image width is 30.00 kpc with 0.15 kpc resolution
</pre></div></div>
</div>
<section id="Stellar-mass-maps">
<h3>Stellar mass maps<a class="headerlink" href="#Stellar-mass-maps" title="Permalink to this heading">#</a></h3>
<p>The base imaging classes in Synthesizer are designed to allow multiple different use cases including spectral data cubes, photometry in multiple bands, and images of arbitrary properties. Before we venture into photometry lets make a stellar mass histogram by passing the stellar masses in as <code class="docutils literal notranslate"><span class="pre">pixel_values</span></code>.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">img_start</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>

<span class="c1"># Get the image</span>
<span class="n">mass_hist_img</span> <span class="o">=</span> <span class="n">gal</span><span class="o">.</span><span class="n">make_images</span><span class="p">(</span>
    <span class="n">resolution</span><span class="p">,</span>
    <span class="n">fov</span><span class="o">=</span><span class="n">width</span><span class="p">,</span>
    <span class="n">img_type</span><span class="o">=</span><span class="s2">&quot;hist&quot;</span><span class="p">,</span>
    <span class="n">pixel_values</span><span class="o">=</span><span class="n">gal</span><span class="o">.</span><span class="n">stars</span><span class="o">.</span><span class="n">_current_masses</span><span class="p">,</span>
<span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Histogram image took:&quot;</span><span class="p">,</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">img_start</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Histogram image took: 0.002189159393310547
</pre></div></div>
</div>
<p>When making a singular image from an array passed to <code class="docutils literal notranslate"><span class="pre">pixel_values</span></code> the resultant image is stored in <code class="docutils literal notranslate"><span class="pre">Image.img</span></code>. Lets plot the resulting stellar mass histogram.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Plot what we&#39;ve made</span>
<span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">111</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">mass_hist_img</span><span class="o">.</span><span class="n">img</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">close</span><span class="p">(</span><span class="n">fig</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/imaging_particle_imaging_15_0.png" src="../_images/imaging_particle_imaging_15_0.png" />
</div>
</div>
<p>However, stellar particles in SPH simulations are not point sources. In fact we defined the smoothing lengths that describes each stellar particle’s SPH kernel above when we made the <code class="docutils literal notranslate"><span class="pre">Stars</span></code>. If we pass <code class="docutils literal notranslate"><span class="pre">&quot;smoothed&quot;</span></code> instead of <code class="docutils literal notranslate"><span class="pre">&quot;hist&quot;</span></code> to <code class="docutils literal notranslate"><span class="pre">img_type</span></code> we can make use of these smoothing lengths and make an image of the stellar distribution correctly smoothed of the SPH kernels.</p>
<p>To do so we first need to get an SPH kernel from <code class="docutils literal notranslate"><span class="pre">synthesizer.kernel_functions</span></code> and pass that to <code class="docutils literal notranslate"><span class="pre">make_images</span></code> in addition to the previous properties.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Get the SPH kernel</span>
<span class="n">sph_kernel</span> <span class="o">=</span> <span class="n">Kernel</span><span class="p">()</span>
<span class="n">kernel_data</span> <span class="o">=</span> <span class="n">sph_kernel</span><span class="o">.</span><span class="n">get_kernel</span><span class="p">()</span>

<span class="n">img_start</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>

<span class="c1"># Get the image</span>
<span class="n">mass_smooth_img</span> <span class="o">=</span> <span class="n">gal</span><span class="o">.</span><span class="n">make_images</span><span class="p">(</span>
    <span class="n">resolution</span><span class="p">,</span>
    <span class="n">fov</span><span class="o">=</span><span class="n">width</span><span class="p">,</span>
    <span class="n">img_type</span><span class="o">=</span><span class="s2">&quot;smoothed&quot;</span><span class="p">,</span>
    <span class="n">pixel_values</span><span class="o">=</span><span class="n">gal</span><span class="o">.</span><span class="n">stars</span><span class="o">.</span><span class="n">_current_masses</span><span class="p">,</span>
    <span class="n">kernel</span><span class="o">=</span><span class="n">kernel_data</span><span class="p">,</span>
    <span class="n">kernel_threshold</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
<span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Smoothed image took:&quot;</span><span class="p">,</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">img_start</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Smoothed image took: 0.003208637237548828
</pre></div></div>
</div>
<p>We also provide helper functions for making plots from the computed image arrays. In the simplest use case the user only has to state the type of image they’d like to plot: <code class="docutils literal notranslate"><span class="pre">&quot;standard&quot;</span></code> for the images we’ve made here, and <code class="docutils literal notranslate"><span class="pre">&quot;psf&quot;</span></code> for images with PSFs and <code class="docutils literal notranslate"><span class="pre">&quot;noise&quot;</span></code> for images including nosie, both of which we will cover shortly. The user can also optionally state the colormap to use, provide a normalisation range for the image/images and provide a function to scale the pixel values but we
will ignore those here.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Plot what we&#39;ve made</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">mass_smooth_img</span><span class="o">.</span><span class="n">plot_image</span><span class="p">(</span>
    <span class="n">img_type</span><span class="o">=</span><span class="s2">&quot;standard&quot;</span><span class="p">,</span> <span class="n">show</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s2">&quot;plasma&quot;</span>
<span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">close</span><span class="p">(</span><span class="n">fig</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/imaging_particle_imaging_19_0.png" src="../_images/imaging_particle_imaging_19_0.png" />
</div>
</div>
</section>
<section id="Photometric-imaging">
<h3>Photometric imaging<a class="headerlink" href="#Photometric-imaging" title="Permalink to this heading">#</a></h3>
<p>What we really want is observed photometric images in the filters we defined earlier. Compared to the simple mass map we now need to provide a number of extra arguments:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">sed</span></code>: The <code class="docutils literal notranslate"><span class="pre">SED</span></code> object we created earlier containing the rest frame and observed SEDs and wavelength/frequency arrays.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">filters</span></code>: The <code class="docutils literal notranslate"><span class="pre">FilterCollection</span></code> we defined earlier with the bands we want images in.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">rest_frame</span></code>: A boolean flag for whether we want the rest frame or observed photometric images. Here we will make observed images.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cosmo</span></code>: The astropy.cosmology object defining the employed cosmology.</p></li>
</ul>
<p>Internally a spectral data cube is made first and stored in the image at <code class="docutils literal notranslate"><span class="pre">Image.ifu_obj</span></code> (the data cube array itself being stored in <code class="docutils literal notranslate"><span class="pre">Image.ifu_obj.ifu</span></code>) which the filter curves are then convolved with to produce the photometric images in each band. This process is significantly more efficient than making images using the photometry of each particle, even when only using 2 filters.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[11]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">img_start</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>

<span class="c1"># Get the image</span>
<span class="n">hist_img</span> <span class="o">=</span> <span class="n">gal</span><span class="o">.</span><span class="n">make_images</span><span class="p">(</span>
    <span class="n">resolution</span><span class="p">,</span>
    <span class="n">fov</span><span class="o">=</span><span class="n">width</span><span class="p">,</span>
    <span class="n">img_type</span><span class="o">=</span><span class="s2">&quot;hist&quot;</span><span class="p">,</span>
    <span class="n">stellar_spectra_type</span><span class="o">=</span><span class="s2">&quot;incident&quot;</span><span class="p">,</span>
    <span class="n">filters</span><span class="o">=</span><span class="n">filters</span><span class="p">,</span>
    <span class="n">rest_frame</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">cosmo</span><span class="o">=</span><span class="n">cosmo</span><span class="p">,</span>
<span class="p">)</span>

<span class="c1"># Get the image</span>
<span class="n">smooth_img</span> <span class="o">=</span> <span class="n">gal</span><span class="o">.</span><span class="n">make_images</span><span class="p">(</span>
    <span class="n">resolution</span><span class="p">,</span>
    <span class="n">fov</span><span class="o">=</span><span class="n">width</span><span class="p">,</span>
    <span class="n">img_type</span><span class="o">=</span><span class="s2">&quot;smoothed&quot;</span><span class="p">,</span>
    <span class="n">stellar_spectra_type</span><span class="o">=</span><span class="s2">&quot;incident&quot;</span><span class="p">,</span>
    <span class="n">filters</span><span class="o">=</span><span class="n">filters</span><span class="p">,</span>
    <span class="n">rest_frame</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">cosmo</span><span class="o">=</span><span class="n">cosmo</span><span class="p">,</span>
    <span class="n">kernel</span><span class="o">=</span><span class="n">kernel_data</span><span class="p">,</span>
    <span class="n">kernel_threshold</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
<span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Images took:&quot;</span><span class="p">,</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">img_start</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Images took: 0.01268148422241211
</pre></div></div>
</div>
<p>When making images in multiple bands the image arrays themselves are stored in a dictionary of the form <code class="docutils literal notranslate"><span class="pre">{f.filter_code:</span> <span class="pre">img_array}</span></code>. Below we extract this dictionary and plot each of the images we have made.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[12]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">hist_imgs</span> <span class="o">=</span> <span class="n">hist_img</span><span class="o">.</span><span class="n">imgs</span>
<span class="n">smooth_imgs</span> <span class="o">=</span> <span class="n">smooth_img</span><span class="o">.</span><span class="n">imgs</span>

<span class="c1"># Lets set up a simple normalisation across all images</span>
<span class="n">vmax</span> <span class="o">=</span> <span class="mi">0</span>
<span class="k">for</span> <span class="n">img</span> <span class="ow">in</span> <span class="n">hist_imgs</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
    <span class="n">up</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">percentile</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="mf">99.5</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">up</span> <span class="o">&gt;</span> <span class="n">vmax</span><span class="p">:</span>
        <span class="n">vmax</span> <span class="o">=</span> <span class="n">up</span>
<span class="k">for</span> <span class="n">img</span> <span class="ow">in</span> <span class="n">smooth_imgs</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
    <span class="n">up</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">percentile</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="mf">99.9</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">up</span> <span class="o">&gt;</span> <span class="n">vmax</span><span class="p">:</span>
        <span class="n">vmax</span> <span class="o">=</span> <span class="n">up</span>
<span class="n">norm</span> <span class="o">=</span> <span class="n">cm</span><span class="o">.</span><span class="n">Normalize</span><span class="p">(</span><span class="n">vmin</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">vmax</span><span class="o">=</span><span class="n">vmax</span><span class="p">)</span>

<span class="c1"># Set up plot</span>
<span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">4</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">filters</span><span class="p">),</span> <span class="mi">4</span> <span class="o">*</span> <span class="mi">2</span><span class="p">))</span>
<span class="n">gs</span> <span class="o">=</span> <span class="n">gridspec</span><span class="o">.</span><span class="n">GridSpec</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">filters</span><span class="p">),</span> <span class="n">hspace</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">wspace</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span>

<span class="c1"># Create top row</span>
<span class="n">axes</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">filters</span><span class="p">)):</span>
    <span class="n">axes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="n">gs</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="n">i</span><span class="p">]))</span>

<span class="c1"># Loop over images plotting them</span>
<span class="k">for</span> <span class="n">ax</span><span class="p">,</span> <span class="n">fcode</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">axes</span><span class="p">,</span> <span class="n">filter_codes</span><span class="p">):</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">hist_imgs</span><span class="p">[</span><span class="n">fcode</span><span class="p">],</span> <span class="n">norm</span><span class="o">=</span><span class="n">norm</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s2">&quot;Greys_r&quot;</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="n">fcode</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span>
        <span class="n">axis</span><span class="o">=</span><span class="s2">&quot;both&quot;</span><span class="p">,</span>
        <span class="n">which</span><span class="o">=</span><span class="s2">&quot;both&quot;</span><span class="p">,</span>
        <span class="n">left</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">right</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">labelleft</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">labelright</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">bottom</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">top</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">labelbottom</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">labeltop</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="p">)</span>

<span class="c1"># Set y axis label on left most plot</span>
<span class="n">axes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">&quot;Histogram&quot;</span><span class="p">)</span>

<span class="c1"># Create bottom row</span>
<span class="n">axes</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">filters</span><span class="p">)):</span>
    <span class="n">axes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="n">gs</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="n">i</span><span class="p">]))</span>

<span class="c1"># Loop over images plotting them</span>
<span class="k">for</span> <span class="n">ax</span><span class="p">,</span> <span class="n">fcode</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">axes</span><span class="p">,</span> <span class="n">filter_codes</span><span class="p">):</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">smooth_imgs</span><span class="p">[</span><span class="n">fcode</span><span class="p">],</span> <span class="n">norm</span><span class="o">=</span><span class="n">norm</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s2">&quot;Greys_r&quot;</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span>
        <span class="n">axis</span><span class="o">=</span><span class="s2">&quot;both&quot;</span><span class="p">,</span>
        <span class="n">which</span><span class="o">=</span><span class="s2">&quot;both&quot;</span><span class="p">,</span>
        <span class="n">left</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">right</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">labelleft</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">labelright</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">bottom</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">top</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">labelbottom</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">labeltop</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="p">)</span>

<span class="c1"># Set y axis label on left most plot</span>
<span class="n">axes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">&quot;Smoothed&quot;</span><span class="p">)</span>

<span class="c1"># Plot the image</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">close</span><span class="p">(</span><span class="n">fig</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/imaging_particle_imaging_23_0.png" src="../_images/imaging_particle_imaging_23_0.png" />
</div>
</div>
</section>
</section>
<section id="Including-a-Point-Spread-Function-(PSF)">
<h2>Including a Point Spread Function (PSF)<a class="headerlink" href="#Including-a-Point-Spread-Function-(PSF)" title="Permalink to this heading">#</a></h2>
<p>Of course, the smoothed distribution is only part of the story. To properly model observations by a particular observatory we need to take into account the smoothing due to the PSF of the telescope.</p>
<p>We take the PSFs as arrays stored in a dictionary of the form <code class="docutils literal notranslate"><span class="pre">{f.filter_code:</span> <span class="pre">psf_array}</span></code>, where each filter has its own PSF array (optionally a single array can be passed and appliec to all filters). Here we will just create a fake gaussian PSF for all filters but PSFs can be sourced however the user wishes (for Webb we recommend the <em>webbpsf</em> package) as long as a simple numpy array is passed within the psf dictionary for each filter.</p>
<p>We also enable automatic super sampling of the image via the <code class="docutils literal notranslate"><span class="pre">psf_resample_factor</span></code> argument to improve the results of the convolution. The number of pixels along an axis will be increased by this factor prior to the intial image creation, the convolution is then applied at the super resolution and then all images are downsampled back to the native resolution.</p>
<p>Note that a single call to <code class="docutils literal notranslate"><span class="pre">Galaxy.make_image</span></code> computes all types of images needed depending on the passed arguments, there is no need to create the image without the PSF first as we did above. Using the lower level interface each stage can be applied separately (see the images docs). The initial “PSF-less” image will be created at the super sampled resolution and then both <code class="docutils literal notranslate"><span class="pre">Image.imgs</span></code> and the PSF convolved images will be downsampled after convolution to the native pixel resolution. For
finer control over resampling the user can use the base Image objects themselves.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[13]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Create a fake PSF for each filter</span>
<span class="n">psf</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">outer</span><span class="p">(</span><span class="n">signal</span><span class="o">.</span><span class="n">windows</span><span class="o">.</span><span class="n">gaussian</span><span class="p">(</span><span class="mi">50</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="n">signal</span><span class="o">.</span><span class="n">windows</span><span class="o">.</span><span class="n">gaussian</span><span class="p">(</span><span class="mi">50</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span>
<span class="n">psfs</span> <span class="o">=</span> <span class="p">{</span><span class="n">f</span><span class="p">:</span> <span class="n">psf</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">filters</span><span class="o">.</span><span class="n">filter_codes</span><span class="p">}</span>

<span class="n">img_start</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>

<span class="c1"># Get the image</span>
<span class="n">psf_img</span> <span class="o">=</span> <span class="n">gal</span><span class="o">.</span><span class="n">make_images</span><span class="p">(</span>
    <span class="n">resolution</span><span class="p">,</span>
    <span class="n">fov</span><span class="o">=</span><span class="n">width</span><span class="p">,</span>
    <span class="n">img_type</span><span class="o">=</span><span class="s2">&quot;smoothed&quot;</span><span class="p">,</span>
    <span class="n">stellar_spectra_type</span><span class="o">=</span><span class="s2">&quot;incident&quot;</span><span class="p">,</span>
    <span class="n">filters</span><span class="o">=</span><span class="n">filters</span><span class="p">,</span>
    <span class="n">rest_frame</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">cosmo</span><span class="o">=</span><span class="n">cosmo</span><span class="p">,</span>
    <span class="n">psfs</span><span class="o">=</span><span class="n">psfs</span><span class="p">,</span>
    <span class="n">psf_resample_factor</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
    <span class="n">kernel</span><span class="o">=</span><span class="n">kernel_data</span><span class="p">,</span>
    <span class="n">kernel_threshold</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
<span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;PSF images made, took:&quot;</span><span class="p">,</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">img_start</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
PSF images made, took: 0.07320141792297363
</pre></div></div>
</div>
<p>After convolution the results are stored in a dictionary, <code class="docutils literal notranslate"><span class="pre">Image.imgs_psf</span></code> (or <code class="docutils literal notranslate"><span class="pre">Image.img_psf</span></code> for singular images made from an array). Here we will use the plotting helper function to plot these images with some normalisation.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[14]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">psf_imgs</span> <span class="o">=</span> <span class="n">psf_img</span><span class="o">.</span><span class="n">imgs_psf</span>

<span class="c1"># Lets set up a simple normalisation across all images</span>
<span class="n">vmax</span> <span class="o">=</span> <span class="mi">0</span>
<span class="k">for</span> <span class="n">img</span> <span class="ow">in</span> <span class="n">psf_imgs</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
    <span class="n">up</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">percentile</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="mf">99.9</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">up</span> <span class="o">&gt;</span> <span class="n">vmax</span><span class="p">:</span>
        <span class="n">vmax</span> <span class="o">=</span> <span class="n">up</span>

<span class="c1"># Get the plot</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">psf_img</span><span class="o">.</span><span class="n">plot_image</span><span class="p">(</span><span class="n">img_type</span><span class="o">=</span><span class="s2">&quot;psf&quot;</span><span class="p">,</span> <span class="n">show</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">vmin</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">vmax</span><span class="o">=</span><span class="n">vmax</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">close</span><span class="p">(</span><span class="n">fig</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/imaging_particle_imaging_27_0.png" src="../_images/imaging_particle_imaging_27_0.png" />
</div>
</div>
</section>
<section id="Including-noise">
<h2>Including noise<a class="headerlink" href="#Including-noise" title="Permalink to this heading">#</a></h2>
<p>The final ingredient for a fully forward modelled synthetic image is a noise field. We enable a couple interfaces to implement these on the images: - A simple implementation via the <code class="docutils literal notranslate"><span class="pre">noises</span></code> argument. If this argument is passed to <code class="docutils literal notranslate"><span class="pre">Galaxy.make_image</span></code> then a noise field will be created centred on 0 with this standard deviation for each filer if <code class="docutils literal notranslate"><span class="pre">noises</span></code> is a dictionary. If <code class="docutils literal notranslate"><span class="pre">noises</span></code> is a single value it will be used for all filters. - A more sophisticated method where the noise is
calculated using an aperture, a signal to noise ratio/s (SNR/s), and depths in each filter. The arguments are defined as follows: - <code class="docutils literal notranslate"><span class="pre">aperture</span></code>: Either a single value or a dicitonary with a value per filter defining the radius of the aperture in which the noise is defined. This/these values are assumed to be in the image unit system defined by the resolution. - <code class="docutils literal notranslate"><span class="pre">snrs</span></code>: Either a single value or a dicitonary with a value per filter defining the signal to noise ratio inside the aperture. -
<code class="docutils literal notranslate"><span class="pre">depths</span></code>: Either a single value or a dicitonary with a value and unit per filter defining the depth in each filter. Must be defined in the same units as the pixel values (erg / s / Hz for rest frame luminosity, nJy for flux images). There are helper functions in <code class="docutils literal notranslate"><span class="pre">synthesizer.utils</span></code> which enable easy switching between unit systems.</p>
<p>As with the PSF images this can all be handled in a single call to <code class="docutils literal notranslate"><span class="pre">Galaxy.make_image</span></code>. If PSFs have been provided the noise will be applied to the images with a PSF, otherwise the PSF-less images will be used.</p>
<p>Below we demonstrate the the first simple approach using the <code class="docutils literal notranslate"><span class="pre">noises</span></code> argument. Images with noise are stored in a dictionary, <code class="docutils literal notranslate"><span class="pre">Image.imgs_noise</span></code> (or <code class="docutils literal notranslate"><span class="pre">Image.img_noise</span></code> for singular images made from an array).</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[15]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">img_start</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>

<span class="c1"># Get the image</span>
<span class="n">simple_noise_img</span> <span class="o">=</span> <span class="n">gal</span><span class="o">.</span><span class="n">make_images</span><span class="p">(</span>
    <span class="n">resolution</span><span class="p">,</span>
    <span class="n">fov</span><span class="o">=</span><span class="n">width</span><span class="p">,</span>
    <span class="n">img_type</span><span class="o">=</span><span class="s2">&quot;smoothed&quot;</span><span class="p">,</span>
    <span class="n">stellar_spectra_type</span><span class="o">=</span><span class="s2">&quot;incident&quot;</span><span class="p">,</span>
    <span class="n">filters</span><span class="o">=</span><span class="n">filters</span><span class="p">,</span>
    <span class="n">rest_frame</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">cosmo</span><span class="o">=</span><span class="n">cosmo</span><span class="p">,</span>
    <span class="n">psfs</span><span class="o">=</span><span class="n">psfs</span><span class="p">,</span>
    <span class="n">psf_resample_factor</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
    <span class="n">noises</span><span class="o">=</span><span class="mi">100</span> <span class="o">*</span> <span class="n">nJy</span><span class="p">,</span>
    <span class="n">kernel</span><span class="o">=</span><span class="n">kernel_data</span><span class="p">,</span>
    <span class="n">kernel_threshold</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
<span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Noisy images made, took:&quot;</span><span class="p">,</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">img_start</span><span class="p">)</span>

<span class="n">simple_noise_imgs</span> <span class="o">=</span> <span class="n">simple_noise_img</span><span class="o">.</span><span class="n">imgs_noise</span>

<span class="c1"># Lets set up a simple normalisation across all images</span>
<span class="n">vmax</span> <span class="o">=</span> <span class="mi">0</span>
<span class="k">for</span> <span class="n">img</span> <span class="ow">in</span> <span class="n">simple_noise_imgs</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
    <span class="n">up</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">percentile</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="mf">99.9</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">up</span> <span class="o">&gt;</span> <span class="n">vmax</span><span class="p">:</span>
        <span class="n">vmax</span> <span class="o">=</span> <span class="n">up</span>

<span class="c1"># Get the plot</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">simple_noise_img</span><span class="o">.</span><span class="n">plot_image</span><span class="p">(</span>
    <span class="n">img_type</span><span class="o">=</span><span class="s2">&quot;noise&quot;</span><span class="p">,</span> <span class="n">show</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">vmin</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">vmax</span><span class="o">=</span><span class="n">vmax</span>
<span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">close</span><span class="p">(</span><span class="n">fig</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Noisy images made, took: 0.3320000171661377
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/imaging_particle_imaging_29_1.png" src="../_images/imaging_particle_imaging_29_1.png" />
</div>
</div>
<p>And here we define a toy set of <code class="docutils literal notranslate"><span class="pre">depths</span></code> with a fixed SNR and aperture size.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[16]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Create the dictionary of depths</span>
<span class="n">depths</span> <span class="o">=</span> <span class="p">{</span><span class="n">f</span><span class="o">.</span><span class="n">filter_code</span><span class="p">:</span> <span class="mi">100</span> <span class="o">*</span> <span class="n">nJy</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">filters</span><span class="p">}</span>

<span class="n">img_start</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>

<span class="c1"># Get the image</span>
<span class="n">noise_img</span> <span class="o">=</span> <span class="n">gal</span><span class="o">.</span><span class="n">make_images</span><span class="p">(</span>
    <span class="n">resolution</span><span class="p">,</span>
    <span class="n">fov</span><span class="o">=</span><span class="n">width</span><span class="p">,</span>
    <span class="n">img_type</span><span class="o">=</span><span class="s2">&quot;smoothed&quot;</span><span class="p">,</span>
    <span class="n">stellar_spectra_type</span><span class="o">=</span><span class="s2">&quot;incident&quot;</span><span class="p">,</span>
    <span class="n">filters</span><span class="o">=</span><span class="n">filters</span><span class="p">,</span>
    <span class="n">rest_frame</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">cosmo</span><span class="o">=</span><span class="n">cosmo</span><span class="p">,</span>
    <span class="n">psfs</span><span class="o">=</span><span class="n">psfs</span><span class="p">,</span>
    <span class="n">psf_resample_factor</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
    <span class="n">depths</span><span class="o">=</span><span class="n">depths</span><span class="p">,</span>
    <span class="n">snrs</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
    <span class="n">aperture</span><span class="o">=</span><span class="mf">0.2</span><span class="p">,</span>
    <span class="n">kernel</span><span class="o">=</span><span class="n">kernel_data</span><span class="p">,</span>
    <span class="n">kernel_threshold</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
<span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Smoothed images made, took:&quot;</span><span class="p">,</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">img_start</span><span class="p">)</span>

<span class="n">noise_imgs</span> <span class="o">=</span> <span class="n">noise_img</span><span class="o">.</span><span class="n">imgs_noise</span>
<span class="nb">print</span><span class="p">([</span><span class="n">noise_imgs</span><span class="p">[</span><span class="n">f</span><span class="o">.</span><span class="n">filter_code</span><span class="p">]</span><span class="o">.</span><span class="n">shape</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">filters</span><span class="p">])</span>
<span class="c1"># Lets set up a simple normalisation across all images</span>
<span class="n">vmax</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">vmin</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">inf</span>
<span class="k">for</span> <span class="n">img</span> <span class="ow">in</span> <span class="n">noise_imgs</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
    <span class="n">up</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">percentile</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="mf">99.9</span><span class="p">)</span>
    <span class="n">low</span> <span class="o">=</span> <span class="o">-</span><span class="n">np</span><span class="o">.</span><span class="n">percentile</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="mi">32</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">up</span> <span class="o">&gt;</span> <span class="n">vmax</span><span class="p">:</span>
        <span class="n">vmax</span> <span class="o">=</span> <span class="n">up</span>
    <span class="k">if</span> <span class="n">low</span> <span class="o">&lt;</span> <span class="n">vmin</span><span class="p">:</span>
        <span class="n">vmin</span> <span class="o">=</span> <span class="n">low</span>

<span class="c1"># Get the plot</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">simple_noise_img</span><span class="o">.</span><span class="n">plot_image</span><span class="p">(</span>
    <span class="n">img_type</span><span class="o">=</span><span class="s2">&quot;noise&quot;</span><span class="p">,</span> <span class="n">show</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">vmin</span><span class="o">=</span><span class="n">vmin</span><span class="p">,</span> <span class="n">vmax</span><span class="o">=</span><span class="n">vmax</span>
<span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">close</span><span class="p">(</span><span class="n">fig</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Smoothed images made, took: 1.2548511028289795
[(800, 800), (800, 800), (800, 800)]
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/imaging_particle_imaging_31_1.png" src="../_images/imaging_particle_imaging_31_1.png" />
</div>
</div>
<p>Finally we can use the RGB image method on the <code class="docutils literal notranslate"><span class="pre">Image</span></code> object to make quick RGB images by simply providing a dictionary detailing which filters we want in which bands, the type of image we want (once again <code class="docutils literal notranslate"><span class="pre">&quot;standard&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;psf&quot;</span></code>, or <code class="docutils literal notranslate"><span class="pre">&quot;noise&quot;</span></code>) and optional weights which we will ignore here.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[17]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Create the rgb image from the psf image above example using our 3 filters</span>
<span class="n">rgb_img</span> <span class="o">=</span> <span class="n">noise_img</span><span class="o">.</span><span class="n">make_rgb_image</span><span class="p">(</span>
    <span class="n">rgb_filters</span><span class="o">=</span><span class="p">{</span>
        <span class="s2">&quot;R&quot;</span><span class="p">:</span> <span class="p">[</span>
            <span class="s2">&quot;JWST/NIRCam.F200W&quot;</span><span class="p">,</span>
        <span class="p">],</span>
        <span class="s2">&quot;G&quot;</span><span class="p">:</span> <span class="p">[</span>
            <span class="s2">&quot;JWST/NIRCam.F150W&quot;</span><span class="p">,</span>
        <span class="p">],</span>
        <span class="s2">&quot;B&quot;</span><span class="p">:</span> <span class="p">[</span>
            <span class="s2">&quot;JWST/NIRCam.F090W&quot;</span><span class="p">,</span>
        <span class="p">],</span>
    <span class="p">},</span>
    <span class="n">img_type</span><span class="o">=</span><span class="s2">&quot;noise&quot;</span><span class="p">,</span>
<span class="p">)</span>

<span class="c1"># Set up minima and maxima</span>
<span class="n">vmin</span> <span class="o">=</span> <span class="o">-</span><span class="n">np</span><span class="o">.</span><span class="n">percentile</span><span class="p">(</span><span class="n">rgb_img</span><span class="p">,</span> <span class="mi">32</span><span class="p">)</span>
<span class="n">vmax</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">percentile</span><span class="p">(</span><span class="n">rgb_img</span><span class="p">,</span> <span class="mf">99.9</span><span class="p">)</span>
<span class="n">norm</span> <span class="o">=</span> <span class="n">cm</span><span class="o">.</span><span class="n">Normalize</span><span class="p">(</span><span class="n">vmin</span><span class="o">=</span><span class="n">vmin</span><span class="p">,</span> <span class="n">vmax</span><span class="o">=</span><span class="n">vmax</span><span class="p">,</span> <span class="n">clip</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Scaling to:&quot;</span><span class="p">,</span> <span class="n">vmin</span><span class="p">,</span> <span class="s2">&quot;-&gt;&quot;</span><span class="p">,</span> <span class="n">vmax</span><span class="p">)</span>

<span class="c1"># Normalise the image.</span>
<span class="n">rgb_img</span> <span class="o">=</span> <span class="n">norm</span><span class="p">(</span><span class="n">rgb_img</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">rgb_img</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>

<span class="c1"># Plot the image</span>
<span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">111</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">rgb_img</span><span class="p">,</span> <span class="n">origin</span><span class="o">=</span><span class="s2">&quot;lower&quot;</span><span class="p">,</span> <span class="n">interpolation</span><span class="o">=</span><span class="s2">&quot;nearest&quot;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="s2">&quot;off&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">close</span><span class="p">(</span><span class="n">fig</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Scaling to: -0.0389318509222274 -&gt; 144.73231155437028
(800, 800, 3)
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/imaging_particle_imaging_33_1.png" src="../_images/imaging_particle_imaging_33_1.png" />
</div>
</div>
</section>
<section id="Making-property-maps">
<h2>Making property maps<a class="headerlink" href="#Making-property-maps" title="Permalink to this heading">#</a></h2>
<p>Synthesizer provides some helper methods for making commonly used maps. Below are examples showing their use. Some of these are summative (e.g. mass) while others are mass weighted averages (e.g. metallicity and age).</p>
<p>To plot them we can use the <code class="docutils literal notranslate"><span class="pre">plot_map</span></code> helper functions which can optionally include a colorbar, unlike <code class="docutils literal notranslate"><span class="pre">plot_image</span></code>.</p>
<section id="Mass-maps">
<h3>Mass maps<a class="headerlink" href="#Mass-maps" title="Permalink to this heading">#</a></h3>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[18]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Make the stellar mass map</span>
<span class="n">stellar_mass_map</span> <span class="o">=</span> <span class="n">gal</span><span class="o">.</span><span class="n">make_stellar_mass_map</span><span class="p">(</span>
    <span class="n">resolution</span><span class="o">=</span><span class="n">resolution</span><span class="p">,</span>
    <span class="n">fov</span><span class="o">=</span><span class="n">width</span><span class="p">,</span>
    <span class="n">img_type</span><span class="o">=</span><span class="s2">&quot;smoothed&quot;</span><span class="p">,</span>
    <span class="n">kernel</span><span class="o">=</span><span class="n">kernel_data</span><span class="p">,</span>
    <span class="n">kernel_threshold</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">stellar_mass_map</span><span class="o">.</span><span class="n">plot_map</span><span class="p">(</span>
    <span class="n">show</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">cmap</span><span class="o">=</span><span class="s2">&quot;plasma&quot;</span><span class="p">,</span>
    <span class="n">extent</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="mi">15</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="o">-</span><span class="mi">15</span><span class="p">,</span> <span class="mi">15</span><span class="p">],</span>
    <span class="n">cbar_label</span><span class="o">=</span><span class="s2">&quot;$M_\star/M_\odot$&quot;</span><span class="p">,</span>
<span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">close</span><span class="p">(</span><span class="n">fig</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/imaging_particle_imaging_35_0.png" src="../_images/imaging_particle_imaging_35_0.png" />
</div>
</div>
</section>
<section id="Metallicity-maps">
<h3>Metallicity maps<a class="headerlink" href="#Metallicity-maps" title="Permalink to this heading">#</a></h3>
<p>For metallicity we can either plot the average metallicity in a pixel or the total metal mass in a pixel.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[19]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Make the average stellar metallicity map</span>
<span class="n">metallicity_map</span> <span class="o">=</span> <span class="n">gal</span><span class="o">.</span><span class="n">make_stellar_metallicity_map</span><span class="p">(</span>
    <span class="n">resolution</span><span class="o">=</span><span class="n">resolution</span><span class="p">,</span>
    <span class="n">fov</span><span class="o">=</span><span class="n">width</span><span class="p">,</span>
    <span class="n">img_type</span><span class="o">=</span><span class="s2">&quot;smoothed&quot;</span><span class="p">,</span>
    <span class="n">kernel</span><span class="o">=</span><span class="n">kernel_data</span><span class="p">,</span>
    <span class="n">kernel_threshold</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">metallicity_map</span><span class="o">.</span><span class="n">plot_map</span><span class="p">(</span>
    <span class="n">show</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">cmap</span><span class="o">=</span><span class="s2">&quot;plasma&quot;</span><span class="p">,</span>
    <span class="n">extent</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="mi">15</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="o">-</span><span class="mi">15</span><span class="p">,</span> <span class="mi">15</span><span class="p">],</span>
    <span class="n">cbar_label</span><span class="o">=</span><span class="sa">r</span><span class="s2">&quot;$\langle Z \rangle $&quot;</span><span class="p">,</span>
<span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">close</span><span class="p">(</span><span class="n">fig</span><span class="p">)</span>

<span class="c1"># Make the stellar metal mass map</span>
<span class="n">metal_map</span> <span class="o">=</span> <span class="n">gal</span><span class="o">.</span><span class="n">make_stellar_metal_mass_map</span><span class="p">(</span>
    <span class="n">resolution</span><span class="o">=</span><span class="n">resolution</span><span class="p">,</span>
    <span class="n">fov</span><span class="o">=</span><span class="n">width</span><span class="p">,</span>
    <span class="n">img_type</span><span class="o">=</span><span class="s2">&quot;smoothed&quot;</span><span class="p">,</span>
    <span class="n">kernel</span><span class="o">=</span><span class="n">kernel_data</span><span class="p">,</span>
    <span class="n">kernel_threshold</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">metal_map</span><span class="o">.</span><span class="n">plot_map</span><span class="p">(</span>
    <span class="n">show</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">cmap</span><span class="o">=</span><span class="s2">&quot;plasma&quot;</span><span class="p">,</span>
    <span class="n">extent</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="mi">15</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="o">-</span><span class="mi">15</span><span class="p">,</span> <span class="mi">15</span><span class="p">],</span>
    <span class="n">cbar_label</span><span class="o">=</span><span class="s2">&quot;$M_Z/M_\odot$&quot;</span><span class="p">,</span>
<span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">close</span><span class="p">(</span><span class="n">fig</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/imaging_particle_imaging_37_0.png" src="../_images/imaging_particle_imaging_37_0.png" />
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/imaging_particle_imaging_37_1.png" src="../_images/imaging_particle_imaging_37_1.png" />
</div>
</div>
</section>
<section id="Age-maps">
<h3>Age maps<a class="headerlink" href="#Age-maps" title="Permalink to this heading">#</a></h3>
<p>We can plot the average age in a pixel. Note that we can provide a normalisation function to the plotting method to scale our colormap.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[20]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">matplotlib.colors</span> <span class="kn">import</span> <span class="n">LogNorm</span><span class="p">,</span> <span class="n">Normalize</span>


<span class="c1"># Make the stellar age map</span>
<span class="n">age_map</span> <span class="o">=</span> <span class="n">gal</span><span class="o">.</span><span class="n">make_stellar_age_map</span><span class="p">(</span>
    <span class="n">resolution</span><span class="o">=</span><span class="n">resolution</span><span class="p">,</span>
    <span class="n">fov</span><span class="o">=</span><span class="n">width</span><span class="p">,</span>
    <span class="n">img_type</span><span class="o">=</span><span class="s2">&quot;smoothed&quot;</span><span class="p">,</span>
    <span class="n">kernel</span><span class="o">=</span><span class="n">kernel_data</span><span class="p">,</span>
    <span class="n">kernel_threshold</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
<span class="p">)</span>

<span class="c1"># Set up a normalisation</span>
<span class="n">norm</span> <span class="o">=</span> <span class="n">LogNorm</span><span class="p">(</span><span class="n">vmin</span><span class="o">=</span><span class="mi">10</span><span class="o">**</span><span class="mi">9</span><span class="p">,</span> <span class="n">vmax</span><span class="o">=</span><span class="mi">10</span><span class="o">**</span><span class="mf">10.5</span><span class="p">,</span> <span class="n">clip</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">age_map</span><span class="o">.</span><span class="n">plot_map</span><span class="p">(</span>
    <span class="n">show</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">cmap</span><span class="o">=</span><span class="s2">&quot;plasma&quot;</span><span class="p">,</span>
    <span class="n">extent</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="mi">15</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="o">-</span><span class="mi">15</span><span class="p">,</span> <span class="mi">15</span><span class="p">],</span>
    <span class="n">cbar_label</span><span class="o">=</span><span class="sa">r</span><span class="s2">&quot;$\langle \mathrm</span><span class="si">{Age}</span><span class="s2"> / [\mathrm</span><span class="si">{yr}</span><span class="s2">] \rangle$&quot;</span><span class="p">,</span>
    <span class="n">norm</span><span class="o">=</span><span class="n">norm</span><span class="p">,</span>
<span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">close</span><span class="p">(</span><span class="n">fig</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/imaging_particle_imaging_39_0.png" src="../_images/imaging_particle_imaging_39_0.png" />
</div>
</div>
</section>
<section id="SFR-maps">
<h3>SFR maps<a class="headerlink" href="#SFR-maps" title="Permalink to this heading">#</a></h3>
<p>By taking all the recently formed stars (those younger than <code class="docutils literal notranslate"><span class="pre">age_bin</span></code>) we can plot SFR maps. By default <code class="docutils literal notranslate"><span class="pre">age_bin</span></code> is 100 Myrs.</p>
<p>We can also pass <code class="docutils literal notranslate"><span class="pre">plot_map</span></code> a <code class="docutils literal notranslate"><span class="pre">tick_formatter</span></code> to format the color bar ticks however we desire.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[21]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">matplotlib.ticker</span> <span class="kn">import</span> <span class="n">FuncFormatter</span>


<span class="c1"># Make the SFR map</span>
<span class="n">sfr_map</span> <span class="o">=</span> <span class="n">gal</span><span class="o">.</span><span class="n">make_sfr_map</span><span class="p">(</span>
    <span class="n">resolution</span><span class="o">=</span><span class="n">resolution</span><span class="p">,</span>
    <span class="n">fov</span><span class="o">=</span><span class="n">width</span><span class="p">,</span>
    <span class="n">img_type</span><span class="o">=</span><span class="s2">&quot;smoothed&quot;</span><span class="p">,</span>
    <span class="n">kernel</span><span class="o">=</span><span class="n">kernel_data</span><span class="p">,</span>
    <span class="n">kernel_threshold</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
    <span class="n">age_bin</span><span class="o">=</span><span class="mi">100</span> <span class="o">*</span> <span class="n">Myr</span><span class="p">,</span>
<span class="p">)</span>

<span class="c1"># Set up a normalisation</span>
<span class="n">norm</span> <span class="o">=</span> <span class="n">Normalize</span><span class="p">(</span><span class="n">vmin</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">vmax</span><span class="o">=</span><span class="mf">8.5</span> <span class="o">*</span> <span class="mi">10</span><span class="o">**-</span><span class="mi">6</span><span class="p">,</span> <span class="n">clip</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1"># Set up the tick formatter</span>
<span class="n">tick_formatter</span> <span class="o">=</span> <span class="n">FuncFormatter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">tick_pos</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">np</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">sfr_map</span><span class="o">.</span><span class="n">plot_map</span><span class="p">(</span>
    <span class="n">show</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">cmap</span><span class="o">=</span><span class="s2">&quot;plasma&quot;</span><span class="p">,</span>
    <span class="n">extent</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="mi">15</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="o">-</span><span class="mi">15</span><span class="p">,</span> <span class="mi">15</span><span class="p">],</span>
    <span class="n">cbar_label</span><span class="o">=</span><span class="s2">&quot;$\log_</span><span class="si">{10}</span><span class="s2">(\mathrm</span><span class="si">{SFR}</span><span class="s2"> / [M_\odot/yr])$&quot;</span><span class="p">,</span>
    <span class="n">norm</span><span class="o">=</span><span class="n">norm</span><span class="p">,</span>
    <span class="n">tick_formatter</span><span class="o">=</span><span class="n">tick_formatter</span><span class="p">,</span>
<span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">close</span><span class="p">(</span><span class="n">fig</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
/tmp/ipykernel_3934/4062600106.py:18: RuntimeWarning: divide by zero encountered in log10
  tick_formatter = FuncFormatter(lambda x, tick_pos: f&#34;{np.log10(x):.2f}&#34;)
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/imaging_particle_imaging_41_1.png" src="../_images/imaging_particle_imaging_41_1.png" />
</div>
</div>
</section>
<section id="sSFR-maps">
<h3>sSFR maps<a class="headerlink" href="#sSFR-maps" title="Permalink to this heading">#</a></h3>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[22]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Make the sSFR map</span>
<span class="n">ssfr_map</span> <span class="o">=</span> <span class="n">gal</span><span class="o">.</span><span class="n">make_ssfr_map</span><span class="p">(</span>
    <span class="n">resolution</span><span class="o">=</span><span class="n">resolution</span><span class="p">,</span>
    <span class="n">fov</span><span class="o">=</span><span class="n">width</span><span class="p">,</span>
    <span class="n">img_type</span><span class="o">=</span><span class="s2">&quot;smoothed&quot;</span><span class="p">,</span>
    <span class="n">kernel</span><span class="o">=</span><span class="n">kernel_data</span><span class="p">,</span>
    <span class="n">kernel_threshold</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
<span class="p">)</span>

<span class="c1"># Set up a normalisation</span>
<span class="n">norm</span> <span class="o">=</span> <span class="n">Normalize</span><span class="p">(</span><span class="n">vmin</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">vmax</span><span class="o">=</span><span class="mf">4.75</span> <span class="o">*</span> <span class="mi">10</span><span class="o">**-</span><span class="mi">15</span><span class="p">,</span> <span class="n">clip</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">ssfr_map</span><span class="o">.</span><span class="n">plot_map</span><span class="p">(</span>
    <span class="n">show</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">cmap</span><span class="o">=</span><span class="s2">&quot;plasma&quot;</span><span class="p">,</span>
    <span class="n">extent</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="mi">15</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="o">-</span><span class="mi">15</span><span class="p">,</span> <span class="mi">15</span><span class="p">],</span>
    <span class="n">cbar_label</span><span class="o">=</span><span class="s2">&quot;$\log_</span><span class="si">{10}</span><span class="s2">(\mathrm</span><span class="si">{SFR}</span><span class="s2"> / [M_\odot/yr])$&quot;</span><span class="p">,</span>
    <span class="n">norm</span><span class="o">=</span><span class="n">norm</span><span class="p">,</span>
    <span class="n">tick_formatter</span><span class="o">=</span><span class="n">tick_formatter</span><span class="p">,</span>
<span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">close</span><span class="p">(</span><span class="n">fig</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
/tmp/ipykernel_3934/4062600106.py:18: RuntimeWarning: divide by zero encountered in log10
  tick_formatter = FuncFormatter(lambda x, tick_pos: f&#34;{np.log10(x):.2f}&#34;)
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/imaging_particle_imaging_43_1.png" src="../_images/imaging_particle_imaging_43_1.png" />
</div>
</div>
</section>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="parametric_imaging.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Creating Images From Parametric Galaxies</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="imaging.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Imaging</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2023, Chris Lovell, Stephen Wilkins, Aswin Vijayan, Will Roper
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Creating Images From Galaxy Particle distributions</a><ul>
<li><a class="reference internal" href="#The-setup">The setup</a><ul>
<li><a class="reference internal" href="#Getting-the-spectra">Getting the spectra</a></li>
<li><a class="reference internal" href="#Defining-filters">Defining filters</a></li>
</ul>
</li>
<li><a class="reference internal" href="#Imaging">Imaging</a><ul>
<li><a class="reference internal" href="#Stellar-mass-maps">Stellar mass maps</a></li>
<li><a class="reference internal" href="#Photometric-imaging">Photometric imaging</a></li>
</ul>
</li>
<li><a class="reference internal" href="#Including-a-Point-Spread-Function-(PSF)">Including a Point Spread Function (PSF)</a></li>
<li><a class="reference internal" href="#Including-noise">Including noise</a></li>
<li><a class="reference internal" href="#Making-property-maps">Making property maps</a><ul>
<li><a class="reference internal" href="#Mass-maps">Mass maps</a></li>
<li><a class="reference internal" href="#Metallicity-maps">Metallicity maps</a></li>
<li><a class="reference internal" href="#Age-maps">Age maps</a></li>
<li><a class="reference internal" href="#SFR-maps">SFR maps</a></li>
<li><a class="reference internal" href="#sSFR-maps">sSFR maps</a></li>
</ul>
</li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js?v=e031e9a9"></script>
    <script src="../_static/doctools.js?v=888ff710"></script>
    <script src="../_static/sphinx_highlight.js?v=4825356b"></script>
    <script src="../_static/scripts/furo.js?v=32e29ea5"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "tex2jax_ignore|mathjax_ignore|document", "processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    </body>
</html>
<!doctype html>
<html class="no-js" lang="en" data-content_root="">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="index" title="Index" href="../genindex.html" /><link rel="search" title="Search" href="../search.html" /><link rel="next" title="Making maps" href="property_maps.html" /><link rel="prev" title="Creating Images From Parametric Galaxies" href="parametric_imaging.html" />

    <!-- Generated with Sphinx 7.1.1 and Furo 2024.05.06 -->
        <title>Creating Images From Galaxy Particle distributions - Synthesizer</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=a746c00c" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo.css?v=387cc868" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery.css?v=61a4c737" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery-binder.css?v=f4aeca0c" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery-dataframe.css?v=2082cf3c" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery-rendered-html.css?v=1277b6f3" />
    <link rel="stylesheet" type="text/css" href="../_static/nbsphinx-code-cells.css" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo-extensions.css?v=36a5483c" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
  <symbol id="svg-sun-with-moon" viewBox="0 0 24 24">
    <title>Auto light/dark, in light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path style="opacity: 50%" d="M 5.411 14.504 C 5.471 14.504 5.532 14.504 5.591 14.504 C 3.639 16.319 4.383 19.569 6.931 20.352 C 7.693 20.586 8.512 20.551 9.25 20.252 C 8.023 23.207 4.056 23.725 2.11 21.184 C 0.166 18.642 1.702 14.949 4.874 14.536 C 5.051 14.512 5.231 14.5 5.411 14.5 L 5.411 14.504 Z"/>
      <line x1="14.5" y1="3.25" x2="14.5" y2="1.25"/>
      <line x1="14.5" y1="15.85" x2="14.5" y2="17.85"/>
      <line x1="10.044" y1="5.094" x2="8.63" y2="3.68"/>
      <line x1="19" y1="14.05" x2="20.414" y2="15.464"/>
      <line x1="8.2" y1="9.55" x2="6.2" y2="9.55"/>
      <line x1="20.8" y1="9.55" x2="22.8" y2="9.55"/>
      <line x1="10.044" y1="14.006" x2="8.63" y2="15.42"/>
      <line x1="19" y1="5.05" x2="20.414" y2="3.636"/>
      <circle cx="14.5" cy="9.55" r="3.6"/>
    </svg>
  </symbol>
  <symbol id="svg-moon-with-sun" viewBox="0 0 24 24">
    <title>Auto light/dark, in dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path d="M 8.282 7.007 C 8.385 7.007 8.494 7.007 8.595 7.007 C 5.18 10.184 6.481 15.869 10.942 17.24 C 12.275 17.648 13.706 17.589 15 17.066 C 12.851 22.236 5.91 23.143 2.505 18.696 C -0.897 14.249 1.791 7.786 7.342 7.063 C 7.652 7.021 7.965 7 8.282 7 L 8.282 7.007 Z"/>
      <line style="opacity: 50%" x1="18" y1="3.705" x2="18" y2="2.5"/>
      <line style="opacity: 50%" x1="18" y1="11.295" x2="18" y2="12.5"/>
      <line style="opacity: 50%" x1="15.316" y1="4.816" x2="14.464" y2="3.964"/>
      <line style="opacity: 50%" x1="20.711" y1="10.212" x2="21.563" y2="11.063"/>
      <line style="opacity: 50%" x1="14.205" y1="7.5" x2="13.001" y2="7.5"/>
      <line style="opacity: 50%" x1="21.795" y1="7.5" x2="23" y2="7.5"/>
      <line style="opacity: 50%" x1="15.316" y1="10.184" x2="14.464" y2="11.036"/>
      <line style="opacity: 50%" x1="20.711" y1="4.789" x2="21.563" y2="3.937"/>
      <circle style="opacity: 50%" cx="18" cy="7.5" r="2.169"/>
    </svg>
  </symbol>
  <symbol id="svg-pencil" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-pencil-code">
      <path d="M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4" />
      <path d="M13.5 6.5l4 4" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" /
    </svg>
  </symbol>
  <symbol id="svg-eye" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-eye-code">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" />
      <path
        d="M11.11 17.958c-3.209 -.307 -5.91 -2.293 -8.11 -5.958c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6c-.21 .352 -.427 .688 -.647 1.008" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>

<a class="skip-to-content muted-link" href="#furo-main-content">Skip to content</a>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../index.html"><div class="brand">Synthesizer</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
          <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../index.html">
  
  <div class="sidebar-logo-container">
    <img class="sidebar-logo" src="../_static/synth.png" alt="Logo"/>
  </div>
  
  
</a><form class="sidebar-search-container" method="get" action="../search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../grids/grids.html">Grids</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle navigation of Grids</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../grids/grids_example.html">Grids</a></li>
<li class="toctree-l2"><a class="reference internal" href="../grids/grids_example.html#Passing-wavelength-limits">Passing wavelength limits</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../abundances.html">Abundances</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../galaxies/galaxies.html">Galaxy Objects</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle navigation of Galaxy Objects</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../galaxies/galaxy_obj.html">Working with Galaxy objects</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../spectra.html">Spectra</a></li>
<li class="toctree-l1"><a class="reference internal" href="../units.html">Units</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sed.html">The Sed object</a></li>
<li class="toctree-l1"><a class="reference internal" href="../lines.html">Emission lines</a></li>
<li class="toctree-l1"><a class="reference internal" href="../filters.html">Working with Filters</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../blackholes/blackholes.html">Black holes</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><div class="visually-hidden">Toggle navigation of Black holes</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../blackholes/emission_models.html">Blackhole emission models</a></li>
<li class="toctree-l2"><a class="reference internal" href="../blackholes/particle_blackholes.html">Blackholes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../blackholes/parametric_blackholes.html">Parametric Blackholes</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../parametric/parametric.html">Parametric models</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><div class="visually-hidden">Toggle navigation of Parametric models</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../parametric/make_stars.html">Making a Parametric Stellar Population</a></li>
<li class="toctree-l2"><a class="reference internal" href="../parametric/generate_sed.html">Generating Rest Frame SEDs from a Parametric Galaxy</a></li>
<li class="toctree-l2"><a class="reference internal" href="../parametric/generate_lines.html">Generating Lines from a Parametric Galaxy</a></li>
<li class="toctree-l2"><a class="reference internal" href="../parametric/generate_composite_galaxy.html">Generate composite galaxy</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../cosmo/cosmo.html">Cosmological models</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" role="switch" type="checkbox"/><label for="toctree-checkbox-5"><div class="visually-hidden">Toggle navigation of Cosmological models</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../cosmo/cosmo_example.html">Camels example</a></li>
</ul>
</li>
<li class="toctree-l1 current has-children"><a class="reference internal" href="imaging.html">Imaging</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" role="switch" type="checkbox"/><label for="toctree-checkbox-6"><div class="visually-hidden">Toggle navigation of Imaging</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="parametric_data_cube.html">Creating Spectral Data Cubes from a Parametric Galaxy</a></li>
<li class="toctree-l2"><a class="reference internal" href="particle_data_cube.html">Creating Spectral Data Cubes from Galaxy Particle distributions</a></li>
<li class="toctree-l2"><a class="reference internal" href="parametric_imaging.html">Creating Images From Parametric Galaxies</a></li>
<li class="toctree-l2 current current-page"><a class="current reference internal" href="#">Creating Images From Galaxy Particle distributions</a></li>
<li class="toctree-l2"><a class="reference internal" href="property_maps.html">Making maps</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../auto_examples/index.html">Examples</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" role="switch" type="checkbox"/><label for="toctree-checkbox-7"><div class="visually-hidden">Toggle navigation of Examples</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../auto_examples/cosmo/index.html">Cosmological simulation examples</a><input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" role="switch" type="checkbox"/><label for="toctree-checkbox-8"><div class="visually-hidden">Toggle navigation of Cosmological simulation examples</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../auto_examples/cosmo/test_los_spectra.html">Line of sight example</a></li>
<li class="toctree-l3"><a class="reference internal" href="../auto_examples/cosmo/test_aperture_mask.html">Aperture Mask Example</a></li>
<li class="toctree-l3"><a class="reference internal" href="../auto_examples/cosmo/test_parametric_young_stars.html">Parametric Young Stars Example</a></li>
<li class="toctree-l3"><a class="reference internal" href="../auto_examples/cosmo/plot_sc-sam.html">SC-SAM example</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../auto_examples/general/index.html">General examples</a><input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" role="switch" type="checkbox"/><label for="toctree-checkbox-9"><div class="visually-hidden">Toggle navigation of General examples</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../auto_examples/general/plot_igm.html">IGM transmission example</a></li>
<li class="toctree-l3"><a class="reference internal" href="../auto_examples/general/plot_dustcurves.html">Dust curves example</a></li>
<li class="toctree-l3"><a class="reference internal" href="../auto_examples/general/plot_filters.html">Filters example</a></li>
<li class="toctree-l3"><a class="reference internal" href="../auto_examples/general/plot_quiescent_colours.html">Plot quiescent UVJ diagram</a></li>
<li class="toctree-l3"><a class="reference internal" href="../auto_examples/general/plot_photometry.html">Photometry example</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../auto_examples/grids/index.html">Grid examples</a><input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" role="switch" type="checkbox"/><label for="toctree-checkbox-10"><div class="visually-hidden">Toggle navigation of Grid examples</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../auto_examples/grids/plot_log10Q.html">Plot ionising luminosity</a></li>
<li class="toctree-l3"><a class="reference internal" href="../auto_examples/grids/line_cont.html">Plot the line continuum for a given grid point</a></li>
<li class="toctree-l3"><a class="reference internal" href="../auto_examples/grids/plot_spectra.html">Plot spectra example</a></li>
<li class="toctree-l3"><a class="reference internal" href="../auto_examples/grids/plot_lines.html">Get lines example</a></li>
<li class="toctree-l3"><a class="reference internal" href="../auto_examples/grids/plot_spectra_by_age.html">Plot spectra by age</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../auto_examples/imaging/index.html">Imaging examples</a><input class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" role="switch" type="checkbox"/><label for="toctree-checkbox-11"><div class="visually-hidden">Toggle navigation of Imaging examples</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../auto_examples/imaging/image_addition.html">Image addition example</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../auto_examples/parametric/index.html">Parametric galaxy examples</a><input class="toctree-checkbox" id="toctree-checkbox-12" name="toctree-checkbox-12" role="switch" type="checkbox"/><label for="toctree-checkbox-12"><div class="visually-hidden">Toggle navigation of Parametric galaxy examples</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../auto_examples/parametric/plot_delta_lambda.html">Plot delta_lambda for a grid.</a></li>
<li class="toctree-l3"><a class="reference internal" href="../auto_examples/parametric/plot_create_image.html">Create image example</a></li>
<li class="toctree-l3"><a class="reference internal" href="../auto_examples/parametric/plot_observed_sed.html">Generate parametric observed SED</a></li>
<li class="toctree-l3"><a class="reference internal" href="../auto_examples/parametric/plot_sed.html">Generate parametric galaxy SED</a></li>
<li class="toctree-l3"><a class="reference internal" href="../auto_examples/parametric/plot_scale_by_luminosity.html">An example showing how to scale a galaxy’s mass by luminosity/flux.</a></li>
<li class="toctree-l3"><a class="reference internal" href="../auto_examples/parametric/plot_equivalent_width.html">Plot equivalent width for UV indices</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../auto_examples/particle/index.html">Particle galaxy examples</a><input class="toctree-checkbox" id="toctree-checkbox-13" name="toctree-checkbox-13" role="switch" type="checkbox"/><label for="toctree-checkbox-13"><div class="visually-hidden">Toggle navigation of Particle galaxy examples</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../auto_examples/particle/plot_create_sampled_sed.html">Create sampled SED</a></li>
<li class="toctree-l3"><a class="reference internal" href="../auto_examples/particle/plot_compare_parametric_particle.html">Compare parametric and particle SEDs</a></li>
<li class="toctree-l3"><a class="reference internal" href="../auto_examples/particle/plot_compare_grid_assignment.html">Compare SPS grid assignment methods</a></li>
<li class="toctree-l3"><a class="reference internal" href="../auto_examples/particle/plot_single_star_test.html">Compare Single star particle to instantaneous SFZH</a></li>
<li class="toctree-l3"><a class="reference internal" href="../auto_examples/particle/plot_los_spectra.html">Plot line of sight diagnostics</a></li>
<li class="toctree-l3"><a class="reference internal" href="../auto_examples/particle/plot_get_los_attenutation.html">Plot line of sight diagnostics</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../API.html">API Reference</a><input class="toctree-checkbox" id="toctree-checkbox-14" name="toctree-checkbox-14" role="switch" type="checkbox"/><label for="toctree-checkbox-14"><div class="visually-hidden">Toggle navigation of API Reference</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../_autosummary/synthesizer.html">synthesizer</a><input class="toctree-checkbox" id="toctree-checkbox-15" name="toctree-checkbox-15" role="switch" type="checkbox"/><label for="toctree-checkbox-15"><div class="visually-hidden">Toggle navigation of synthesizer</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3 has-children"><a class="reference internal" href="../_autosummary/synthesizer.abundances.html">synthesizer.abundances</a><input class="toctree-checkbox" id="toctree-checkbox-16" name="toctree-checkbox-16" role="switch" type="checkbox"/><label for="toctree-checkbox-16"><div class="visually-hidden">Toggle navigation of synthesizer.abundances</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../_autosummary/synthesizer.abundances.abundance_patterns.html">synthesizer.abundances.abundance_patterns</a></li>
<li class="toctree-l4"><a class="reference internal" href="../_autosummary/synthesizer.abundances.abundance_scalings.html">synthesizer.abundances.abundance_scalings</a></li>
<li class="toctree-l4"><a class="reference internal" href="../_autosummary/synthesizer.abundances.depletion_models.html">synthesizer.abundances.depletion_models</a></li>
<li class="toctree-l4"><a class="reference internal" href="../_autosummary/synthesizer.abundances.elements.html">synthesizer.abundances.elements</a></li>
<li class="toctree-l4"><a class="reference internal" href="../_autosummary/synthesizer.abundances.reference_abundance_patterns.html">synthesizer.abundances.reference_abundance_patterns</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../_autosummary/synthesizer.art.html">synthesizer.art</a></li>
<li class="toctree-l3"><a class="reference internal" href="../_autosummary/synthesizer.base_galaxy.html">synthesizer.base_galaxy</a></li>
<li class="toctree-l3"><a class="reference internal" href="../_autosummary/synthesizer.blackhole_emission_models.html">synthesizer.blackhole_emission_models</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../_autosummary/synthesizer.components.html">synthesizer.components</a><input class="toctree-checkbox" id="toctree-checkbox-17" name="toctree-checkbox-17" role="switch" type="checkbox"/><label for="toctree-checkbox-17"><div class="visually-hidden">Toggle navigation of synthesizer.components</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../_autosummary/synthesizer.components.blackhole.html">synthesizer.components.blackhole</a></li>
<li class="toctree-l4"><a class="reference internal" href="../_autosummary/synthesizer.components.stellar.html">synthesizer.components.stellar</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../_autosummary/synthesizer.conversions.html">synthesizer.conversions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../_autosummary/synthesizer.download_data.html">synthesizer.download_data</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../_autosummary/synthesizer.dust.html">synthesizer.dust</a><input class="toctree-checkbox" id="toctree-checkbox-18" name="toctree-checkbox-18" role="switch" type="checkbox"/><label for="toctree-checkbox-18"><div class="visually-hidden">Toggle navigation of synthesizer.dust</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../_autosummary/synthesizer.dust.attenuation.html">synthesizer.dust.attenuation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../_autosummary/synthesizer.dust.emission.html">synthesizer.dust.emission</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../_autosummary/synthesizer.exceptions.html">synthesizer.exceptions</a><input class="toctree-checkbox" id="toctree-checkbox-19" name="toctree-checkbox-19" role="switch" type="checkbox"/><label for="toctree-checkbox-19"><div class="visually-hidden">Toggle navigation of synthesizer.exceptions</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../_autosummary/synthesizer.exceptions.GridError.html">synthesizer.exceptions.GridError</a></li>
<li class="toctree-l4"><a class="reference internal" href="../_autosummary/synthesizer.exceptions.InconsistentAddition.html">synthesizer.exceptions.InconsistentAddition</a></li>
<li class="toctree-l4"><a class="reference internal" href="../_autosummary/synthesizer.exceptions.InconsistentArguments.html">synthesizer.exceptions.InconsistentArguments</a></li>
<li class="toctree-l4"><a class="reference internal" href="../_autosummary/synthesizer.exceptions.InconsistentCoordinates.html">synthesizer.exceptions.InconsistentCoordinates</a></li>
<li class="toctree-l4"><a class="reference internal" href="../_autosummary/synthesizer.exceptions.InconsistentParameter.html">synthesizer.exceptions.InconsistentParameter</a></li>
<li class="toctree-l4"><a class="reference internal" href="../_autosummary/synthesizer.exceptions.InconsistentWavelengths.html">synthesizer.exceptions.InconsistentWavelengths</a></li>
<li class="toctree-l4"><a class="reference internal" href="../_autosummary/synthesizer.exceptions.IncorrectUnits.html">synthesizer.exceptions.IncorrectUnits</a></li>
<li class="toctree-l4"><a class="reference internal" href="../_autosummary/synthesizer.exceptions.MissingArgument.html">synthesizer.exceptions.MissingArgument</a></li>
<li class="toctree-l4"><a class="reference internal" href="../_autosummary/synthesizer.exceptions.MissingAttribute.html">synthesizer.exceptions.MissingAttribute</a></li>
<li class="toctree-l4"><a class="reference internal" href="../_autosummary/synthesizer.exceptions.MissingImage.html">synthesizer.exceptions.MissingImage</a></li>
<li class="toctree-l4"><a class="reference internal" href="../_autosummary/synthesizer.exceptions.MissingSpectraType.html">synthesizer.exceptions.MissingSpectraType</a></li>
<li class="toctree-l4"><a class="reference internal" href="../_autosummary/synthesizer.exceptions.MissingUnits.html">synthesizer.exceptions.MissingUnits</a></li>
<li class="toctree-l4"><a class="reference internal" href="../_autosummary/synthesizer.exceptions.SVOFilterNotFound.html">synthesizer.exceptions.SVOFilterNotFound</a></li>
<li class="toctree-l4"><a class="reference internal" href="../_autosummary/synthesizer.exceptions.SVOInaccessible.html">synthesizer.exceptions.SVOInaccessible</a></li>
<li class="toctree-l4"><a class="reference internal" href="../_autosummary/synthesizer.exceptions.UnimplementedFunctionality.html">synthesizer.exceptions.UnimplementedFunctionality</a></li>
<li class="toctree-l4"><a class="reference internal" href="../_autosummary/synthesizer.exceptions.UnknownImageType.html">synthesizer.exceptions.UnknownImageType</a></li>
<li class="toctree-l4"><a class="reference internal" href="../_autosummary/synthesizer.exceptions.UnmetDependency.html">synthesizer.exceptions.UnmetDependency</a></li>
<li class="toctree-l4"><a class="reference internal" href="../_autosummary/synthesizer.exceptions.UnrecognisedOption.html">synthesizer.exceptions.UnrecognisedOption</a></li>
<li class="toctree-l4"><a class="reference internal" href="../_autosummary/synthesizer.exceptions.WavelengthOutOfRange.html">synthesizer.exceptions.WavelengthOutOfRange</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../_autosummary/synthesizer.filters.html">synthesizer.filters</a></li>
<li class="toctree-l3"><a class="reference internal" href="../_autosummary/synthesizer.galaxy.html">synthesizer.galaxy</a></li>
<li class="toctree-l3"><a class="reference internal" href="../_autosummary/synthesizer.grid.html">synthesizer.grid</a></li>
<li class="toctree-l3"><a class="reference internal" href="../_autosummary/synthesizer.igm.html">synthesizer.igm</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../_autosummary/synthesizer.imaging.html">synthesizer.imaging</a><input class="toctree-checkbox" id="toctree-checkbox-20" name="toctree-checkbox-20" role="switch" type="checkbox"/><label for="toctree-checkbox-20"><div class="visually-hidden">Toggle navigation of synthesizer.imaging</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4 has-children"><a class="reference internal" href="../_autosummary/synthesizer.imaging.extensions.html">synthesizer.imaging.extensions</a><input class="toctree-checkbox" id="toctree-checkbox-21" name="toctree-checkbox-21" role="switch" type="checkbox"/><label for="toctree-checkbox-21"><div class="visually-hidden">Toggle navigation of synthesizer.imaging.extensions</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l5"><a class="reference internal" href="../_autosummary/synthesizer.imaging.extensions.image.html">synthesizer.imaging.extensions.image</a></li>
<li class="toctree-l5"><a class="reference internal" href="../_autosummary/synthesizer.imaging.extensions.spectral_cube.html">synthesizer.imaging.extensions.spectral_cube</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../_autosummary/synthesizer.imaging.image.html">synthesizer.imaging.image</a></li>
<li class="toctree-l4"><a class="reference internal" href="../_autosummary/synthesizer.imaging.image_collection.html">synthesizer.imaging.image_collection</a></li>
<li class="toctree-l4"><a class="reference internal" href="../_autosummary/synthesizer.imaging.spectral_cube.html">synthesizer.imaging.spectral_cube</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../_autosummary/synthesizer.kernel_functions.html">synthesizer.kernel_functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../_autosummary/synthesizer.line.html">synthesizer.line</a></li>
<li class="toctree-l3"><a class="reference internal" href="../_autosummary/synthesizer.line_ratios.html">synthesizer.line_ratios</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../_autosummary/synthesizer.load_data.html">synthesizer.load_data</a><input class="toctree-checkbox" id="toctree-checkbox-22" name="toctree-checkbox-22" role="switch" type="checkbox"/><label for="toctree-checkbox-22"><div class="visually-hidden">Toggle navigation of synthesizer.load_data</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../_autosummary/synthesizer.load_data.load_camels.html">synthesizer.load_data.load_camels</a></li>
<li class="toctree-l4"><a class="reference internal" href="../_autosummary/synthesizer.load_data.load_flares.html">synthesizer.load_data.load_flares</a></li>
<li class="toctree-l4"><a class="reference internal" href="../_autosummary/synthesizer.load_data.load_illustris.html">synthesizer.load_data.load_illustris</a></li>
<li class="toctree-l4"><a class="reference internal" href="../_autosummary/synthesizer.load_data.load_scsam.html">synthesizer.load_data.load_scsam</a></li>
<li class="toctree-l4"><a class="reference internal" href="../_autosummary/synthesizer.load_data.load_simba.html">synthesizer.load_data.load_simba</a></li>
<li class="toctree-l4"><a class="reference internal" href="../_autosummary/synthesizer.load_data.utils.html">synthesizer.load_data.utils</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../_autosummary/synthesizer.parametric.html">synthesizer.parametric</a><input class="toctree-checkbox" id="toctree-checkbox-23" name="toctree-checkbox-23" role="switch" type="checkbox"/><label for="toctree-checkbox-23"><div class="visually-hidden">Toggle navigation of synthesizer.parametric</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../_autosummary/synthesizer.parametric.blackholes.html">synthesizer.parametric.blackholes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../_autosummary/synthesizer.parametric.galaxy.html">synthesizer.parametric.galaxy</a></li>
<li class="toctree-l4"><a class="reference internal" href="../_autosummary/synthesizer.parametric.metal_dist.html">synthesizer.parametric.metal_dist</a></li>
<li class="toctree-l4"><a class="reference internal" href="../_autosummary/synthesizer.parametric.morphology.html">synthesizer.parametric.morphology</a></li>
<li class="toctree-l4"><a class="reference internal" href="../_autosummary/synthesizer.parametric.sf_hist.html">synthesizer.parametric.sf_hist</a></li>
<li class="toctree-l4"><a class="reference internal" href="../_autosummary/synthesizer.parametric.stars.html">synthesizer.parametric.stars</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../_autosummary/synthesizer.particle.html">synthesizer.particle</a><input class="toctree-checkbox" id="toctree-checkbox-24" name="toctree-checkbox-24" role="switch" type="checkbox"/><label for="toctree-checkbox-24"><div class="visually-hidden">Toggle navigation of synthesizer.particle</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../_autosummary/synthesizer.particle.blackholes.html">synthesizer.particle.blackholes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../_autosummary/synthesizer.particle.galaxy.html">synthesizer.particle.galaxy</a></li>
<li class="toctree-l4"><a class="reference internal" href="../_autosummary/synthesizer.particle.gas.html">synthesizer.particle.gas</a></li>
<li class="toctree-l4"><a class="reference internal" href="../_autosummary/synthesizer.particle.particles.html">synthesizer.particle.particles</a></li>
<li class="toctree-l4"><a class="reference internal" href="../_autosummary/synthesizer.particle.stars.html">synthesizer.particle.stars</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../_autosummary/synthesizer.photoionisation.html">synthesizer.photoionisation</a><input class="toctree-checkbox" id="toctree-checkbox-25" name="toctree-checkbox-25" role="switch" type="checkbox"/><label for="toctree-checkbox-25"><div class="visually-hidden">Toggle navigation of synthesizer.photoionisation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../_autosummary/synthesizer.photoionisation.cloudy17.html">synthesizer.photoionisation.cloudy17</a></li>
<li class="toctree-l4"><a class="reference internal" href="../_autosummary/synthesizer.photoionisation.cloudy23.html">synthesizer.photoionisation.cloudy23</a></li>
<li class="toctree-l4"><a class="reference internal" href="../_autosummary/synthesizer.photoionisation.photoionisation.html">synthesizer.photoionisation.photoionisation</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../_autosummary/synthesizer.photometry.html">synthesizer.photometry</a></li>
<li class="toctree-l3"><a class="reference internal" href="../_autosummary/synthesizer.plt.html">synthesizer.plt</a></li>
<li class="toctree-l3"><a class="reference internal" href="../_autosummary/synthesizer.sed.html">synthesizer.sed</a></li>
<li class="toctree-l3"><a class="reference internal" href="../_autosummary/synthesizer.stats.html">synthesizer.stats</a></li>
<li class="toctree-l3"><a class="reference internal" href="../_autosummary/synthesizer.survey.html">synthesizer.survey</a></li>
<li class="toctree-l3"><a class="reference internal" href="../_autosummary/synthesizer.units.html">synthesizer.units</a></li>
<li class="toctree-l3"><a class="reference internal" href="../_autosummary/synthesizer.utils.html">synthesizer.utils</a></li>
<li class="toctree-l3"><a class="reference internal" href="../_autosummary/synthesizer.warnings.html">synthesizer.warnings</a></li>
</ul>
</li>
</ul>
</li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          

<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
              <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main" id="furo-main-content">
          <section id="Creating-Images-From-Galaxy-Particle-distributions">
<h1>Creating Images From Galaxy Particle distributions<a class="headerlink" href="#Creating-Images-From-Galaxy-Particle-distributions" title="Permalink to this heading">¶</a></h1>
<p>In this example we show how to create various different types of images and maps from stellar particles. For this purpose we need a stellar distribution and a galaxy. The first section will handle this setup using a CAMELS galaxy, feel free to skip over this section to get to the imaging as the process is well documented elsewhere (e.g. the CAMELS <a class="reference internal" href="../cosmo/cosmo_example.html"><span class="doc">docs</span></a>).</p>
<section id="The-setup">
<h2>The setup<a class="headerlink" href="#The-setup" title="Permalink to this heading">¶</a></h2>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">time</span>

<span class="kn">import</span> <span class="nn">matplotlib.colors</span> <span class="k">as</span> <span class="nn">cm</span>
<span class="kn">import</span> <span class="nn">matplotlib.gridspec</span> <span class="k">as</span> <span class="nn">gridspec</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">astropy.cosmology</span> <span class="kn">import</span> <span class="n">Planck18</span> <span class="k">as</span> <span class="n">cosmo</span>
<span class="kn">from</span> <span class="nn">scipy</span> <span class="kn">import</span> <span class="n">signal</span>
<span class="kn">from</span> <span class="nn">synthesizer.filters</span> <span class="kn">import</span> <span class="n">FilterCollection</span> <span class="k">as</span> <span class="n">Filters</span>
<span class="kn">from</span> <span class="nn">synthesizer.grid</span> <span class="kn">import</span> <span class="n">Grid</span>
<span class="kn">from</span> <span class="nn">synthesizer.kernel_functions</span> <span class="kn">import</span> <span class="n">Kernel</span>
<span class="kn">from</span> <span class="nn">synthesizer.load_data.load_camels</span> <span class="kn">import</span> <span class="n">load_CAMELS_IllustrisTNG</span>
<span class="kn">from</span> <span class="nn">unyt</span> <span class="kn">import</span> <span class="n">Hz</span><span class="p">,</span> <span class="n">erg</span><span class="p">,</span> <span class="n">kpc</span><span class="p">,</span> <span class="n">s</span>
</pre></div>
</div>
</div>
<p>First port of call is initilaising the SPS grid. Here we use the test grid.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Define the grid</span>
<span class="n">grid_name</span> <span class="o">=</span> <span class="s2">&quot;test_grid&quot;</span>
<span class="n">grid_dir</span> <span class="o">=</span> <span class="s2">&quot;../../../tests/test_grid/&quot;</span>
<span class="n">grid</span> <span class="o">=</span> <span class="n">Grid</span><span class="p">(</span><span class="n">grid_name</span><span class="p">,</span> <span class="n">grid_dir</span><span class="o">=</span><span class="n">grid_dir</span><span class="p">,</span> <span class="n">new_lam</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">logspace</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">600</span><span class="p">))</span>
</pre></div>
</div>
</div>
<p>For demonstration purposes we will just load one of the CAMELS galaxies from the test data. To see how to intialise your own galaxies see <a class="reference internal" href="../galaxies/galaxy_obj.html"><span class="doc">the particle galaxy docs</span></a>.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">galaxy_start</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>

<span class="c1"># Create galaxy object</span>
<span class="n">gal</span> <span class="o">=</span> <span class="n">load_CAMELS_IllustrisTNG</span><span class="p">(</span>
    <span class="s2">&quot;../../../tests/data/&quot;</span><span class="p">,</span>
    <span class="n">snap_name</span><span class="o">=</span><span class="s2">&quot;camels_snap.hdf5&quot;</span><span class="p">,</span>
    <span class="n">fof_name</span><span class="o">=</span><span class="s2">&quot;camels_subhalo.hdf5&quot;</span><span class="p">,</span>
    <span class="n">physical</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="p">)[</span><span class="mi">0</span><span class="p">]</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Galaxy created, took:&quot;</span><span class="p">,</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">galaxy_start</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Galaxy has </span><span class="si">{</span><span class="n">gal</span><span class="o">.</span><span class="n">stars</span><span class="o">.</span><span class="n">nstars</span><span class="si">}</span><span class="s2"> stellar particles&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Galaxy gas </span><span class="si">{</span><span class="n">gal</span><span class="o">.</span><span class="n">gas</span><span class="o">.</span><span class="n">nparticles</span><span class="si">}</span><span class="s2"> gas particles&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Galaxy created, took: 0.18546652793884277
Galaxy has 473 stellar particles
Galaxy gas 0 gas particles
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
/home/runner/work/synthesizer/synthesizer/src/synthesizer/particle/galaxy.py:110: RuntimeWarning: In `load_stars`: one of either `initial_masses`, `ages` or `metallicities` is not provided, setting `stars` object to `None`
  self.load_stars(stars=stars)
/home/runner/work/synthesizer/synthesizer/src/synthesizer/particle/galaxy.py:111: RuntimeWarning: In `load_gas`: one of either `masses` or `metallicities` is not provided, setting `gas` object to `None`
  self.load_gas(gas=gas)
/opt/hostedtoolcache/Python/3.10.14/x64/lib/python3.10/site-packages/unyt/array.py:1949: RuntimeWarning: invalid value encountered in divide
  out_arr = func(
</pre></div></div>
</div>
<section id="Getting-the-spectra">
<h3>Getting the spectra<a class="headerlink" href="#Getting-the-spectra" title="Permalink to this heading">¶</a></h3>
<p>To make an image we need to map the stellar particle properties onto the SPS grid defined in the <code class="docutils literal notranslate"><span class="pre">grid</span></code> object. To do this we use the galaxy’s in built <code class="docutils literal notranslate"><span class="pre">generate_particle_spectra</span></code> method and create <code class="docutils literal notranslate"><span class="pre">&quot;total&quot;</span></code> SEDs with both stellar and nebular contributions. This returns an SED object containing lots of helper methods for working with spectra.</p>
<p>Here we will use <code class="docutils literal notranslate"><span class="pre">get_fnu</span></code> to convert the rest frame SED into an observed SED which takes into account the previously set redshift stored on the <code class="docutils literal notranslate"><span class="pre">stars</span></code> object. By passing <code class="docutils literal notranslate"><span class="pre">igm=None</span></code> we assume the default <code class="docutils literal notranslate"><span class="pre">igm</span></code> contribution (<code class="docutils literal notranslate"><span class="pre">Inoue14</span></code>). This can be changed to <code class="docutils literal notranslate"><span class="pre">False</span></code> for no IGM or to another IGM model defined in <code class="docutils literal notranslate"><span class="pre">synthesizer.igm</span></code>.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">spectra_start</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>

<span class="c1"># Calculate the stellar rest frame SEDs for all particles in erg / s / Hz</span>
<span class="n">sed</span> <span class="o">=</span> <span class="n">gal</span><span class="o">.</span><span class="n">stars</span><span class="o">.</span><span class="n">get_particle_spectra_incident</span><span class="p">(</span><span class="n">grid</span><span class="p">)</span>

<span class="c1"># Calculate the observed SED in nJy</span>
<span class="n">sed</span><span class="o">.</span><span class="n">get_fnu</span><span class="p">(</span><span class="n">cosmo</span><span class="p">,</span> <span class="n">gal</span><span class="o">.</span><span class="n">redshift</span><span class="p">,</span> <span class="n">igm</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Spectra created, took:&quot;</span><span class="p">,</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">spectra_start</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Spectra created, took: 0.013672828674316406
</pre></div></div>
</div>
</section>
<section id="Defining-filters">
<h3>Defining filters<a class="headerlink" href="#Defining-filters" title="Permalink to this heading">¶</a></h3>
<p>Next we need to define a set of filters we want photometric images for. This can be done in a number of ways using a <code class="docutils literal notranslate"><span class="pre">FilterCollection</span></code> (see the <a class="reference internal" href="../filters.html"><span class="doc">filter docs</span></a> for a full description). Here we will get Webb filters from the SVO database.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">filter_start</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>

<span class="c1"># Define filter list</span>
<span class="n">filter_codes</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s2">&quot;JWST/NIRCam.F090W&quot;</span><span class="p">,</span>
    <span class="s2">&quot;JWST/NIRCam.F150W&quot;</span><span class="p">,</span>
    <span class="s2">&quot;JWST/NIRCam.F200W&quot;</span><span class="p">,</span>
<span class="p">]</span>

<span class="c1"># Set up filter object</span>
<span class="n">filters</span> <span class="o">=</span> <span class="n">Filters</span><span class="p">(</span><span class="n">filter_codes</span><span class="p">,</span> <span class="n">new_lam</span><span class="o">=</span><span class="n">grid</span><span class="o">.</span><span class="n">lam</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Filters created, took:&quot;</span><span class="p">,</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">filter_start</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Filters created, took: 0.7728111743927002
</pre></div></div>
</div>
</section>
<section id="Getting-photometry">
<h3>Getting photometry<a class="headerlink" href="#Getting-photometry" title="Permalink to this heading">¶</a></h3>
<p>Prior to making the image itself we need to get the luminosity in the filters we just defined. To do this we can use the <code class="docutils literal notranslate"><span class="pre">Sed</span></code> method to get photometry from a spectra. Here we are making images of the incident flux so we only need to get the photometry for that spectra.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">phot_start</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>

<span class="n">gal</span><span class="o">.</span><span class="n">stars</span><span class="o">.</span><span class="n">particle_spectra</span><span class="p">[</span><span class="s2">&quot;incident&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">get_photo_luminosities</span><span class="p">(</span><span class="n">filters</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Photometry computed, took:&quot;</span><span class="p">,</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">phot_start</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Photometry computed, took: 0.0019845962524414062
</pre></div></div>
</div>
</section>
</section>
<section id="Imaging">
<h2>Imaging<a class="headerlink" href="#Imaging" title="Permalink to this heading">¶</a></h2>
<p>The last step before we can make any images is to define the resolution of our images and the FOV (or width) of the images. These must have units associated to them to enable the code to internally transform all quantites to a consistent unit system.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Define the width of the image</span>
<span class="n">width</span> <span class="o">=</span> <span class="mi">30</span> <span class="o">*</span> <span class="n">kpc</span>

<span class="c1"># Define image resolution (here we arbitrarily set it to 100</span>
<span class="c1"># pixels along an axis)</span>
<span class="n">resolution</span> <span class="o">=</span> <span class="n">width</span> <span class="o">/</span> <span class="mi">200</span>

<span class="nb">print</span><span class="p">(</span>
    <span class="s2">&quot;Image width is </span><span class="si">%.2f</span><span class="s2"> kpc with </span><span class="si">%.2f</span><span class="s2"> kpc resolution&quot;</span>
    <span class="o">%</span> <span class="p">(</span><span class="n">width</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="n">resolution</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Image width is 30.00 kpc with 0.15 kpc resolution
</pre></div></div>
</div>
</section>
<section id="Photometric-imaging">
<h2>Photometric imaging<a class="headerlink" href="#Photometric-imaging" title="Permalink to this heading">¶</a></h2>
<p>Now we have everything we need to make images. Although it is possible to work with the low level <code class="docutils literal notranslate"><span class="pre">ImageCollection</span></code> and <code class="docutils literal notranslate"><span class="pre">Image</span></code> methods we will here use the interface on a <code class="docutils literal notranslate"><span class="pre">Galaxy</span></code> to do everything. There are two of these helper methods, <code class="docutils literal notranslate"><span class="pre">get_imgs_luminosity</span></code> for luminosity images, and <code class="docutils literal notranslate"><span class="pre">get_imgs_flux</span></code> for flux images. We will focus on the former here.</p>
<p>The image helper methods both take the image properties we previously defined and a type of photometry for the image, these types can be any spectra for which you have calculated photometry, e.g. <code class="docutils literal notranslate"><span class="pre">&quot;incident&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;intrinsic&quot;</span></code>, or <code class="docutils literal notranslate"><span class="pre">&quot;attenuated&quot;</span></code>, for either stars (<code class="docutils literal notranslate"><span class="pre">stellar_photometry</span></code>) or black holes (<code class="docutils literal notranslate"><span class="pre">blackhole_photometry</span></code>). If both a stellar and black hole photometry type are passed then an image is made for each component before they are combined and returned.</p>
<p>Images can either be simple 2D histograms or the particles can be smoothed over their kernels. What type of image is made is controlled by the <code class="docutils literal notranslate"><span class="pre">img_type</span></code> argument. Below we demonstrate both approaches, however, for the latter we also need to define a kernel, which we have already imported from the <code class="docutils literal notranslate"><span class="pre">kernel_functions</span></code> module.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">img_start</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>

<span class="c1"># Get the SPH kernel</span>
<span class="n">sph_kernel</span> <span class="o">=</span> <span class="n">Kernel</span><span class="p">()</span>
<span class="n">kernel_data</span> <span class="o">=</span> <span class="n">sph_kernel</span><span class="o">.</span><span class="n">get_kernel</span><span class="p">()</span>

<span class="c1"># Get the image</span>
<span class="n">hist_imgs</span> <span class="o">=</span> <span class="n">gal</span><span class="o">.</span><span class="n">get_images_luminosity</span><span class="p">(</span>
    <span class="n">resolution</span><span class="p">,</span>
    <span class="n">fov</span><span class="o">=</span><span class="n">width</span><span class="p">,</span>
    <span class="n">img_type</span><span class="o">=</span><span class="s2">&quot;hist&quot;</span><span class="p">,</span>
    <span class="n">stellar_photometry</span><span class="o">=</span><span class="s2">&quot;incident&quot;</span><span class="p">,</span>
    <span class="n">blackhole_photometry</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
<span class="p">)</span>

<span class="c1"># Get the image</span>
<span class="n">smooth_imgs</span> <span class="o">=</span> <span class="n">gal</span><span class="o">.</span><span class="n">get_images_luminosity</span><span class="p">(</span>
    <span class="n">resolution</span><span class="p">,</span>
    <span class="n">fov</span><span class="o">=</span><span class="n">width</span><span class="p">,</span>
    <span class="n">img_type</span><span class="o">=</span><span class="s2">&quot;smoothed&quot;</span><span class="p">,</span>
    <span class="n">stellar_photometry</span><span class="o">=</span><span class="s2">&quot;incident&quot;</span><span class="p">,</span>
    <span class="n">blackhole_photometry</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">kernel</span><span class="o">=</span><span class="n">kernel_data</span><span class="p">,</span>
    <span class="n">kernel_threshold</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
<span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Images took:&quot;</span><span class="p">,</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">img_start</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Images took: 0.6104898452758789
</pre></div></div>
</div>
<p>When making images in multiple bands the image arrays themselves are stored on the returned <code class="docutils literal notranslate"><span class="pre">ImageCollection</span></code> in a dictionary called <code class="docutils literal notranslate"><span class="pre">imgs</span></code> of the form <code class="docutils literal notranslate"><span class="pre">{filter_code:</span> <span class="pre">Image}</span></code>, where an <code class="docutils literal notranslate"><span class="pre">Image</span></code> is a container including the image array itself (<code class="docutils literal notranslate"><span class="pre">arr</span></code>), unit information (<code class="docutils literal notranslate"><span class="pre">units</span></code>) and the <code class="docutils literal notranslate"><span class="pre">resolution</span></code> and <code class="docutils literal notranslate"><span class="pre">fov</span></code> of the image. An Image also includes a number of different methods for manipulating and visuallising individual <code class="docutils literal notranslate"><span class="pre">Image</span></code>s.</p>
<p>Below we will extract this dictionary and plot each of the images we have made.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Lets set up a simple normalisation across all images</span>
<span class="n">vmax</span> <span class="o">=</span> <span class="mi">0</span>
<span class="k">for</span> <span class="n">img</span> <span class="ow">in</span> <span class="n">hist_imgs</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
    <span class="n">up</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">percentile</span><span class="p">(</span><span class="n">img</span><span class="o">.</span><span class="n">arr</span><span class="p">,</span> <span class="mf">99.9</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">up</span> <span class="o">&gt;</span> <span class="n">vmax</span><span class="p">:</span>
        <span class="n">vmax</span> <span class="o">=</span> <span class="n">up</span>
<span class="n">hist_norm</span> <span class="o">=</span> <span class="n">cm</span><span class="o">.</span><span class="n">Normalize</span><span class="p">(</span><span class="n">vmin</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">vmax</span><span class="o">=</span><span class="n">vmax</span><span class="p">)</span>
<span class="n">vmax</span> <span class="o">=</span> <span class="mi">0</span>
<span class="k">for</span> <span class="n">img</span> <span class="ow">in</span> <span class="n">smooth_imgs</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
    <span class="n">up</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">percentile</span><span class="p">(</span><span class="n">img</span><span class="o">.</span><span class="n">arr</span><span class="p">,</span> <span class="mf">99.9</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">up</span> <span class="o">&gt;</span> <span class="n">vmax</span><span class="p">:</span>
        <span class="n">vmax</span> <span class="o">=</span> <span class="n">up</span>
<span class="n">smooth_norm</span> <span class="o">=</span> <span class="n">cm</span><span class="o">.</span><span class="n">Normalize</span><span class="p">(</span><span class="n">vmin</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">vmax</span><span class="o">=</span><span class="n">vmax</span><span class="p">)</span>


<span class="c1"># Set up plot</span>
<span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">4</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">filters</span><span class="p">),</span> <span class="mi">4</span> <span class="o">*</span> <span class="mi">2</span><span class="p">))</span>
<span class="n">gs</span> <span class="o">=</span> <span class="n">gridspec</span><span class="o">.</span><span class="n">GridSpec</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">filters</span><span class="p">),</span> <span class="n">hspace</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">wspace</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span>

<span class="c1"># Create top row</span>
<span class="n">axes</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">filters</span><span class="p">)):</span>
    <span class="n">axes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="n">gs</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="n">i</span><span class="p">]))</span>

<span class="c1"># Loop over images plotting them</span>
<span class="k">for</span> <span class="n">ax</span><span class="p">,</span> <span class="n">fcode</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">axes</span><span class="p">,</span> <span class="n">filter_codes</span><span class="p">):</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">hist_imgs</span><span class="p">[</span><span class="n">fcode</span><span class="p">]</span><span class="o">.</span><span class="n">arr</span><span class="p">,</span> <span class="n">norm</span><span class="o">=</span><span class="n">hist_norm</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s2">&quot;Greys_r&quot;</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="n">fcode</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span>
        <span class="n">axis</span><span class="o">=</span><span class="s2">&quot;both&quot;</span><span class="p">,</span>
        <span class="n">which</span><span class="o">=</span><span class="s2">&quot;both&quot;</span><span class="p">,</span>
        <span class="n">left</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">right</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">labelleft</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">labelright</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">bottom</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">top</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">labelbottom</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">labeltop</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="p">)</span>

<span class="c1"># Set y axis label on left most plot</span>
<span class="n">axes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">&quot;Histogram&quot;</span><span class="p">)</span>

<span class="c1"># Create bottom row</span>
<span class="n">axes</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">filters</span><span class="p">)):</span>
    <span class="n">axes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="n">gs</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="n">i</span><span class="p">]))</span>

<span class="c1"># Loop over images plotting them</span>
<span class="k">for</span> <span class="n">ax</span><span class="p">,</span> <span class="n">fcode</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">axes</span><span class="p">,</span> <span class="n">filter_codes</span><span class="p">):</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">smooth_imgs</span><span class="p">[</span><span class="n">fcode</span><span class="p">]</span><span class="o">.</span><span class="n">arr</span><span class="p">,</span> <span class="n">norm</span><span class="o">=</span><span class="n">smooth_norm</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s2">&quot;Greys_r&quot;</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span>
        <span class="n">axis</span><span class="o">=</span><span class="s2">&quot;both&quot;</span><span class="p">,</span>
        <span class="n">which</span><span class="o">=</span><span class="s2">&quot;both&quot;</span><span class="p">,</span>
        <span class="n">left</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">right</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">labelleft</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">labelright</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">bottom</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">top</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">labelbottom</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">labeltop</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="p">)</span>

<span class="c1"># Set y axis label on left most plot</span>
<span class="n">axes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">&quot;Smoothed&quot;</span><span class="p">)</span>

<span class="c1"># Plot the image</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">close</span><span class="p">(</span><span class="n">fig</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/imaging_particle_imaging_17_0.png" src="../_images/imaging_particle_imaging_17_0.png" />
</div>
</div>
</section>
<section id="Applying-a-Point-Spread-Function-(PSF)">
<h2>Applying a Point Spread Function (PSF)<a class="headerlink" href="#Applying-a-Point-Spread-Function-(PSF)" title="Permalink to this heading">¶</a></h2>
<p>Of course, the smoothed distribution is only part of the story. To properly model observations by a particular observatory we need to take into account the smoothing due to the PSF of the telescope.</p>
<p>To apply a PSF we can either use <code class="docutils literal notranslate"><span class="pre">Image.apply_psf</span></code> on individual <code class="docutils literal notranslate"><span class="pre">Image</span></code> objects or apply a dictionary of PSFs of the form <code class="docutils literal notranslate"><span class="pre">{filter_code:</span> <span class="pre">psf_array}</span></code>, to each image in an <code class="docutils literal notranslate"><span class="pre">ImageCollection</span></code> with the <code class="docutils literal notranslate"><span class="pre">apply_psfs</span></code> method. Here we will just create a fake gaussian PSF for all filters but PSFs can be sourced however the user wishes (for Webb we recommend the <em>webbpsf</em> package) as long as a simple numpy array is passed within the psf dictionary for each filter.</p>
<p>To get the most accurate result from the PSF convolution it is recommended to do the convolution on a super sampled image. Although we will here just supersample the images we just made, it is recommended to first make the images at the super sampled resolution and then subsequently downsample after the fact.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Create a fake PSF for each filter</span>
<span class="n">psf</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">outer</span><span class="p">(</span>
    <span class="n">signal</span><span class="o">.</span><span class="n">windows</span><span class="o">.</span><span class="n">gaussian</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="n">signal</span><span class="o">.</span><span class="n">windows</span><span class="o">.</span><span class="n">gaussian</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="p">)</span>
<span class="n">psfs</span> <span class="o">=</span> <span class="p">{</span><span class="n">f</span><span class="p">:</span> <span class="n">psf</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">filters</span><span class="o">.</span><span class="n">filter_codes</span><span class="p">}</span>

<span class="n">img_start</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>

<span class="c1"># Supersample the image</span>
<span class="n">smooth_imgs</span><span class="o">.</span><span class="n">supersample</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>

<span class="c1"># Apply the PSFs</span>
<span class="n">psf_imgs</span> <span class="o">=</span> <span class="n">smooth_imgs</span><span class="o">.</span><span class="n">apply_psfs</span><span class="p">(</span><span class="n">psfs</span><span class="p">)</span>

<span class="c1"># And downsample back to the native resolution</span>
<span class="n">smooth_imgs</span><span class="o">.</span><span class="n">downsample</span><span class="p">(</span><span class="mf">0.5</span><span class="p">)</span>
<span class="n">psf_imgs</span><span class="o">.</span><span class="n">downsample</span><span class="p">(</span><span class="mf">0.5</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;PSF images made, took:&quot;</span><span class="p">,</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">img_start</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
PSF images made, took: 0.08580160140991211
</pre></div></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">apply_psfs</span></code> returns a new <code class="docutils literal notranslate"><span class="pre">ImageCollection</span></code> containing the newly convolved <code class="docutils literal notranslate"><span class="pre">Image</span></code>s. We can now use the plotting helper function to plot these images with some normalisation.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[11]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Lets set up a simple normalisation across all images</span>
<span class="n">vmax</span> <span class="o">=</span> <span class="mi">0</span>
<span class="k">for</span> <span class="n">img</span> <span class="ow">in</span> <span class="n">psf_imgs</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
    <span class="n">up</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">percentile</span><span class="p">(</span><span class="n">img</span><span class="o">.</span><span class="n">arr</span><span class="p">,</span> <span class="mf">99.9</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">up</span> <span class="o">&gt;</span> <span class="n">vmax</span><span class="p">:</span>
        <span class="n">vmax</span> <span class="o">=</span> <span class="n">up</span>

<span class="c1"># Get the plot</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">psf_imgs</span><span class="o">.</span><span class="n">plot_images</span><span class="p">(</span><span class="n">show</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">vmin</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">vmax</span><span class="o">=</span><span class="n">vmax</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">close</span><span class="p">(</span><span class="n">fig</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/imaging_particle_imaging_21_0.png" src="../_images/imaging_particle_imaging_21_0.png" />
</div>
</div>
</section>
<section id="Applying-noise">
<h2>Applying noise<a class="headerlink" href="#Applying-noise" title="Permalink to this heading">¶</a></h2>
<p>The final ingredient for a fully forward modelled synthetic image is a noise field. We include 4 different to approaches to include noise: - <code class="docutils literal notranslate"><span class="pre">apply_noise_array</span></code>: Add an exist noise field/array. - <code class="docutils literal notranslate"><span class="pre">apply_noise_from_std</span></code>: Derive a noise distribution, centered on 0, from a user specified standard deviation, and then generate and add a noise array. - <code class="docutils literal notranslate"><span class="pre">apply_noise_from_snr</span></code> (aperture): Derive a noise distribution from a Signal-to-Noise Ratio (SNR), defined in an aperture with size
<code class="docutils literal notranslate"><span class="pre">aperture_radius</span></code> and a specified <code class="docutils literal notranslate"><span class="pre">depth</span></code>. This will derive the standard deviation of the nosie distribution assuming <span class="math notranslate nohighlight">\(SNR= S / \sigma\)</span> for an aperture before deriving the per pixel noise, computing the noise array and adding it. - <code class="docutils literal notranslate"><span class="pre">apply_noise_from_snr</span></code> (point source): Derive a noise distribution from a SNR and depth. This will derive the standard deviation of the noise distribution assuming <span class="math notranslate nohighlight">\(SNR= S / \sigma\)</span> for a pixel before computing the noise array and adding it. This
behaviour can be achieved by omitting <code class="docutils literal notranslate"><span class="pre">aperture_radius</span></code> in the call to <code class="docutils literal notranslate"><span class="pre">apply_noise_from_snr</span></code></p>
<p>As with applying a PSF, these methods have singular versions (as listed above) which can be used on an individual <code class="docutils literal notranslate"><span class="pre">Image</span></code> and pluralised versions on an <code class="docutils literal notranslate"><span class="pre">ImageCollection</span></code> which take dictionaries for each of the arguments.</p>
<p>If an image has units then the passed <code class="docutils literal notranslate"><span class="pre">noise_arr</span></code> or <code class="docutils literal notranslate"><span class="pre">noise_std</span></code> must also have units.</p>
<p>Applying noise with any of the methods described above will return a new <code class="docutils literal notranslate"><span class="pre">ImageCollection</span></code>/<code class="docutils literal notranslate"><span class="pre">Image</span></code> contain the noisy image. In addition to the noisy image (stored under <code class="docutils literal notranslate"><span class="pre">Image.arr</span></code>) the new <code class="docutils literal notranslate"><span class="pre">Image</span></code> (or the new <code class="docutils literal notranslate"><span class="pre">Image</span></code>s within an <code class="docutils literal notranslate"><span class="pre">ImageCollection</span></code>) will contain the noise array stored in the <code class="docutils literal notranslate"><span class="pre">noise_arr</span></code> attribute and the weight map stored in the <code class="docutils literal notranslate"><span class="pre">weight_map</span></code> attribute on the <code class="docutils literal notranslate"><span class="pre">Image</span></code>.</p>
<p>Below we demonstrate each method using the <code class="docutils literal notranslate"><span class="pre">ImageCollection</span></code> interface. We will not explictly show the noise and weight maps but know they are there if you need them (at <code class="docutils literal notranslate"><span class="pre">Image.noise_arr</span></code> and <code class="docutils literal notranslate"><span class="pre">Image.weight_map</span></code>).</p>
<section id="Noise-arrays">
<h3>Noise arrays<a class="headerlink" href="#Noise-arrays" title="Permalink to this heading">¶</a></h3>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[12]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">img_start</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>

<span class="c1"># Get a noise array for each filter</span>
<span class="n">noises</span> <span class="o">=</span> <span class="p">{</span>
    <span class="n">f</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="mi">10</span><span class="o">**</span><span class="mf">26.0</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="n">psf_imgs</span><span class="o">.</span><span class="n">npix</span><span class="p">))</span>
    <span class="o">*</span> <span class="n">erg</span>
    <span class="o">/</span> <span class="n">s</span>
    <span class="o">/</span> <span class="n">Hz</span>
    <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">psf_imgs</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
<span class="p">}</span>

<span class="c1"># Apply the noise array</span>
<span class="n">noise_array_imgs</span> <span class="o">=</span> <span class="n">psf_imgs</span><span class="o">.</span><span class="n">apply_noise_arrays</span><span class="p">(</span><span class="n">noises</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Noisy images made, took:&quot;</span><span class="p">,</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">img_start</span><span class="p">)</span>

<span class="c1"># Get the plot</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">noise_array_imgs</span><span class="o">.</span><span class="n">plot_images</span><span class="p">(</span><span class="n">show</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">vmin</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">vmax</span><span class="o">=</span><span class="n">vmax</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">close</span><span class="p">(</span><span class="n">fig</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Noisy images made, took: 0.020511388778686523
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/imaging_particle_imaging_23_1.png" src="../_images/imaging_particle_imaging_23_1.png" />
</div>
</div>
</section>
<section id="Noise-from-standard-deviations">
<h3>Noise from standard deviations<a class="headerlink" href="#Noise-from-standard-deviations" title="Permalink to this heading">¶</a></h3>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[13]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">img_start</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>

<span class="c1"># Get a noise standard deviation for each filter</span>
<span class="n">noise_stds</span> <span class="o">=</span> <span class="p">{</span><span class="n">f</span><span class="p">:</span> <span class="mi">10</span><span class="o">**</span><span class="mf">26.3</span> <span class="o">*</span> <span class="n">erg</span> <span class="o">/</span> <span class="n">s</span> <span class="o">/</span> <span class="n">Hz</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">psf_imgs</span><span class="o">.</span><span class="n">keys</span><span class="p">()}</span>

<span class="c1"># Apply the noise array</span>
<span class="n">noise_std_imgs</span> <span class="o">=</span> <span class="n">psf_imgs</span><span class="o">.</span><span class="n">apply_noise_from_stds</span><span class="p">(</span><span class="n">noise_stds</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Noisy images made, took:&quot;</span><span class="p">,</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">img_start</span><span class="p">)</span>

<span class="c1"># Get the plot</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">noise_std_imgs</span><span class="o">.</span><span class="n">plot_images</span><span class="p">(</span><span class="n">show</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">vmin</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">vmax</span><span class="o">=</span><span class="n">vmax</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">close</span><span class="p">(</span><span class="n">fig</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Noisy images made, took: 0.006832122802734375
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/imaging_particle_imaging_25_1.png" src="../_images/imaging_particle_imaging_25_1.png" />
</div>
</div>
</section>
<section id="Noise-from-an-aperture-depth">
<h3>Noise from an aperture depth<a class="headerlink" href="#Noise-from-an-aperture-depth" title="Permalink to this heading">¶</a></h3>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[14]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Get dictionaries with the noise properties for each filter</span>
<span class="n">snrs</span> <span class="o">=</span> <span class="p">{</span><span class="n">f</span><span class="p">:</span> <span class="mi">5</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">psf_imgs</span><span class="o">.</span><span class="n">keys</span><span class="p">()}</span>
<span class="n">depths</span> <span class="o">=</span> <span class="p">{</span><span class="n">f</span><span class="p">:</span> <span class="mi">10</span><span class="o">**</span><span class="mf">28.0</span> <span class="o">*</span> <span class="n">erg</span> <span class="o">/</span> <span class="n">s</span> <span class="o">/</span> <span class="n">Hz</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">psf_imgs</span><span class="o">.</span><span class="n">keys</span><span class="p">()}</span>

<span class="c1"># Apply the noise array</span>
<span class="n">noise_app_imgs</span> <span class="o">=</span> <span class="n">psf_imgs</span><span class="o">.</span><span class="n">apply_noise_from_snrs</span><span class="p">(</span>
    <span class="n">snrs</span><span class="o">=</span><span class="n">snrs</span><span class="p">,</span> <span class="n">depths</span><span class="o">=</span><span class="n">depths</span><span class="p">,</span> <span class="n">aperture_radius</span><span class="o">=</span><span class="mf">0.5</span> <span class="o">*</span> <span class="n">kpc</span>
<span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Noisy images made, took:&quot;</span><span class="p">,</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">img_start</span><span class="p">)</span>

<span class="c1"># Get the plot</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">noise_app_imgs</span><span class="o">.</span><span class="n">plot_images</span><span class="p">(</span><span class="n">show</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">vmin</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">vmax</span><span class="o">=</span><span class="n">vmax</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">close</span><span class="p">(</span><span class="n">fig</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Noisy images made, took: 0.1506650447845459
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/imaging_particle_imaging_27_1.png" src="../_images/imaging_particle_imaging_27_1.png" />
</div>
</div>
</section>
<section id="Noise-from-point-source-depth">
<h3>Noise from point source depth<a class="headerlink" href="#Noise-from-point-source-depth" title="Permalink to this heading">¶</a></h3>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[15]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Get dictionaries with the noise properties for each filter</span>
<span class="n">snrs</span> <span class="o">=</span> <span class="p">{</span><span class="n">f</span><span class="p">:</span> <span class="mi">5</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">psf_imgs</span><span class="o">.</span><span class="n">keys</span><span class="p">()}</span>
<span class="n">depths</span> <span class="o">=</span> <span class="p">{</span><span class="n">f</span><span class="p">:</span> <span class="mi">10</span><span class="o">**</span><span class="mf">27.0</span> <span class="o">*</span> <span class="n">erg</span> <span class="o">/</span> <span class="n">s</span> <span class="o">/</span> <span class="n">Hz</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">psf_imgs</span><span class="o">.</span><span class="n">keys</span><span class="p">()}</span>

<span class="c1"># Apply the noise array</span>
<span class="n">noise_ps_imgs</span> <span class="o">=</span> <span class="n">psf_imgs</span><span class="o">.</span><span class="n">apply_noise_from_snrs</span><span class="p">(</span><span class="n">snrs</span><span class="o">=</span><span class="n">snrs</span><span class="p">,</span> <span class="n">depths</span><span class="o">=</span><span class="n">depths</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Noisy images made, took:&quot;</span><span class="p">,</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">img_start</span><span class="p">)</span>

<span class="c1"># Get the plot</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">noise_ps_imgs</span><span class="o">.</span><span class="n">plot_images</span><span class="p">(</span><span class="n">show</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">vmin</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">vmax</span><span class="o">=</span><span class="n">vmax</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">close</span><span class="p">(</span><span class="n">fig</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Noisy images made, took: 0.29205846786499023
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/imaging_particle_imaging_29_1.png" src="../_images/imaging_particle_imaging_29_1.png" />
</div>
</div>
</section>
</section>
<section id="Making-an-RGB-image">
<h2>Making an RGB image<a class="headerlink" href="#Making-an-RGB-image" title="Permalink to this heading">¶</a></h2>
<p>Finally we can use the RGB image method on the <code class="docutils literal notranslate"><span class="pre">ImageCollection</span></code> to make quick RGB images by simply providing a dictionary detailing which filters we want in which bands and optional weights for each filter which we will ignore here.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[16]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Create the rgb image from the psf image above example using our 3 filters</span>
<span class="n">rgb_img</span> <span class="o">=</span> <span class="n">noise_ps_imgs</span><span class="o">.</span><span class="n">make_rgb_image</span><span class="p">(</span>
    <span class="n">rgb_filters</span><span class="o">=</span><span class="p">{</span>
        <span class="s2">&quot;R&quot;</span><span class="p">:</span> <span class="p">[</span>
            <span class="s2">&quot;JWST/NIRCam.F200W&quot;</span><span class="p">,</span>
        <span class="p">],</span>
        <span class="s2">&quot;G&quot;</span><span class="p">:</span> <span class="p">[</span>
            <span class="s2">&quot;JWST/NIRCam.F150W&quot;</span><span class="p">,</span>
        <span class="p">],</span>
        <span class="s2">&quot;B&quot;</span><span class="p">:</span> <span class="p">[</span>
            <span class="s2">&quot;JWST/NIRCam.F090W&quot;</span><span class="p">,</span>
        <span class="p">],</span>
    <span class="p">},</span>
<span class="p">)</span>

<span class="c1"># Set up minima and maxima</span>
<span class="n">vmin</span> <span class="o">=</span> <span class="o">-</span><span class="n">np</span><span class="o">.</span><span class="n">percentile</span><span class="p">(</span><span class="n">rgb_img</span><span class="p">,</span> <span class="mi">32</span><span class="p">)</span>
<span class="n">vmax</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">percentile</span><span class="p">(</span><span class="n">rgb_img</span><span class="p">,</span> <span class="mf">99.9</span><span class="p">)</span>
<span class="n">norm</span> <span class="o">=</span> <span class="n">cm</span><span class="o">.</span><span class="n">Normalize</span><span class="p">(</span><span class="n">vmin</span><span class="o">=</span><span class="n">vmin</span><span class="p">,</span> <span class="n">vmax</span><span class="o">=</span><span class="n">vmax</span><span class="p">,</span> <span class="n">clip</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Scaling to:&quot;</span><span class="p">,</span> <span class="n">vmin</span><span class="p">,</span> <span class="s2">&quot;-&gt;&quot;</span><span class="p">,</span> <span class="n">vmax</span><span class="p">)</span>

<span class="c1"># Normalise the image.</span>
<span class="n">rgb_img</span> <span class="o">=</span> <span class="n">norm</span><span class="p">(</span><span class="n">rgb_img</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">rgb_img</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>

<span class="c1"># Plot the image</span>
<span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">111</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">rgb_img</span><span class="p">,</span> <span class="n">origin</span><span class="o">=</span><span class="s2">&quot;lower&quot;</span><span class="p">,</span> <span class="n">interpolation</span><span class="o">=</span><span class="s2">&quot;nearest&quot;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="s2">&quot;off&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">close</span><span class="p">(</span><span class="n">fig</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Scaling to: 6.380735924161979e+25 -&gt; 3.094496075794618e+27
(200, 200, 3)
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/imaging_particle_imaging_31_1.png" src="../_images/imaging_particle_imaging_31_1.png" />
</div>
</div>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="property_maps.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Making maps</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="parametric_imaging.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Creating Images From Parametric Galaxies</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2024, Chris Lovell, Stephen Wilkins, Aswin Vijayan, Will Roper
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Creating Images From Galaxy Particle distributions</a><ul>
<li><a class="reference internal" href="#The-setup">The setup</a><ul>
<li><a class="reference internal" href="#Getting-the-spectra">Getting the spectra</a></li>
<li><a class="reference internal" href="#Defining-filters">Defining filters</a></li>
<li><a class="reference internal" href="#Getting-photometry">Getting photometry</a></li>
</ul>
</li>
<li><a class="reference internal" href="#Imaging">Imaging</a></li>
<li><a class="reference internal" href="#Photometric-imaging">Photometric imaging</a></li>
<li><a class="reference internal" href="#Applying-a-Point-Spread-Function-(PSF)">Applying a Point Spread Function (PSF)</a></li>
<li><a class="reference internal" href="#Applying-noise">Applying noise</a><ul>
<li><a class="reference internal" href="#Noise-arrays">Noise arrays</a></li>
<li><a class="reference internal" href="#Noise-from-standard-deviations">Noise from standard deviations</a></li>
<li><a class="reference internal" href="#Noise-from-an-aperture-depth">Noise from an aperture depth</a></li>
<li><a class="reference internal" href="#Noise-from-point-source-depth">Noise from point source depth</a></li>
</ul>
</li>
<li><a class="reference internal" href="#Making-an-RGB-image">Making an RGB image</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js?v=a5f2b424"></script>
    <script src="../_static/doctools.js?v=888ff710"></script>
    <script src="../_static/sphinx_highlight.js?v=4825356b"></script>
    <script src="../_static/scripts/furo.js?v=4e2eecee"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "tex2jax_ignore|mathjax_ignore|document", "processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    </body>
</html>